<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1111px" preserveAspectRatio="none" style="width:2186px;height:1111px;background:#FFFFFF;" version="1.1" viewBox="0 0 2186 1111" width="2186px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="2170" x="10" y="363.082"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="2019" x="10" y="628.877"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="2170" x="10" y="953.293"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="452" x2="452" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="592" x2="592" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="767" x2="767" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="980" x2="980" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1162" x2="1162" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1349" x2="1349" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1634" x2="1634" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1915" x2="1915" y1="52.9766" y2="1104.8457"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2099" x2="2099" y1="52.9766" y2="1104.8457"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="20" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="27" y="42.0234">Actor</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="388" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="419.5" y="25.5352">«/record»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="395" y="42.0234">JurorRecordPage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="527" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69" x="557.5" y="25.5352">«/update»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="534" y="42.0234">JurorUpdatePage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="667" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="187" x="674" y="25.5352">«juror-record.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="691.5" y="42.0234">JurorRecordController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204" x="878" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="190" x="885" y="25.5352">«juror-update.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="903.5" y="42.0234">JurorUpdateController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="1092" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="1114.5" y="25.5352">«record.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1099" y="42.0234">JurorRecordObject</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="215" x="1242" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="201" x="1249" y="25.5352">«jurorDeceasedObject.post()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1278" y="42.0234">JurorDeceasedObject</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="335" x="1467" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="321" x="1474" y="25.5352">«juror-management/update-juror-record.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="1537" y="42.0234">JurorRecordUpdateTemplate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="1812" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="1819" y="42.0234">JurorRecordUpdateValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="2029" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2036" y="42.0234">BackendController</text><polygon fill="#181818" points="580,80.2871,590,84.2871,580,88.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="586" y1="84.2871" y2="84.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="258.25" y="79.5449">update juror record</text><polygon fill="#181818" points="968,109.5977,978,113.5977,968,117.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="592" x2="974" y1="113.5977" y2="113.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="725.5" y="108.8555">call page controller</text><polygon fill="#181818" points="1150,138.9082,1160,142.9082,1150,146.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="980" x2="1156" y1="142.9082" y2="142.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1008" y="138.166">build request object</text><polygon fill="#181818" points="2087.5,168.2188,2097.5,172.2188,2087.5,176.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1162" x2="2093.5" y1="172.2188" y2="172.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1561.75" y="167.4766">send backend request</text><polygon fill="#181818" points="1173,197.5293,1163,201.5293,1173,205.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1167" x2="2098.5" y1="201.5293" y2="201.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1592.25" y="196.7871">ok response</text><polygon fill="#181818" points="991,226.8398,981,230.8398,991,234.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="985" x2="1161" y1="230.8398" y2="230.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1023" y="226.0977">resolve request</text><polygon fill="#181818" points="1622.5,256.1504,1632.5,260.1504,1622.5,264.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="980" x2="1628.5" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1222.75" y="255.4082">request and build template</text><polygon fill="#181818" points="991,285.4609,981,289.4609,991,293.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="985" x2="1633.5" y1="289.4609" y2="289.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1268.25" y="284.7188">return HTML</text><polygon fill="#181818" points="603,314.7715,593,318.7715,603,322.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="597" x2="979" y1="318.7715" y2="318.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="747" y="314.0293">return HTML</text><polygon fill="#181818" points="56.5,344.082,46.5,348.082,56.5,352.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="591" y1="348.082" y2="348.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="278.75" y="343.3398">render HTML</text><path d="M10,363.082 L72,363.082 L72,370.3926 L62,380.3926 L10,380.3926 L10,363.082 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="2170" x="10" y="363.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="376.6504">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="216" x="87" y="375.7168">[Failed to retrieve juror record details]</text><polygon fill="#181818" points="1173,397.7031,1163,401.7031,1173,405.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1167" x2="2098.5" y1="401.7031" y2="401.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1585.25" y="396.9609">error response</text><polygon fill="#181818" points="991,427.0137,981,431.0137,991,435.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="985" x2="1161" y1="431.0137" y2="431.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1007.5" y="426.2715">reject requestObject</text><polygon fill="#181818" points="603,456.3242,593,460.3242,603,464.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="597" x2="979" y1="460.3242" y2="460.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="740.5" y="455.582">error response</text><polygon fill="#181818" points="56.5,485.6348,46.5,489.6348,56.5,493.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50.5" x2="591" y1="489.6348" y2="489.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="252.25" y="484.8926">render error message</text><polygon fill="#181818" points="580,521.9453,590,525.9453,580,529.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="586" y1="525.9453" y2="525.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="206.25" y="521.2031">Select deceased and enter comment</text><polygon fill="#181818" points="968,551.2559,978,555.2559,968,559.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="592" x2="974" y1="555.2559" y2="555.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="725.5" y="550.5137">call page controller</text><polygon fill="#181818" points="1903.5,580.5664,1913.5,584.5664,1903.5,588.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="980" x2="1909.5" y1="584.5664" y2="584.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="1347.75" y="579.8242">validate selection and comment</text><polygon fill="#181818" points="991,609.877,981,613.877,991,617.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="985" x2="1914.5" y1="613.877" y2="613.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1345.75" y="609.1348">selection and comment are valid</text><path d="M10,628.877 L72,628.877 L72,636.1875 L62,646.1875 L10,646.1875 L10,628.877 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="2019" x="10" y="628.877"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="642.4453">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="308" x="87" y="641.5117">[Deceased selection or comment is invalid or missing]</text><polygon fill="#181818" points="991,663.498,981,667.498,991,671.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="985" x2="1914.5" y1="667.498" y2="667.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1323.75" y="662.7559">reason or decision is invalid or missing</text><polygon fill="#181818" points="603,692.8086,593,696.8086,603,700.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="597" x2="979" y1="696.8086" y2="696.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="740.5" y="692.0664">error response</text><polygon fill="#181818" points="56.5,722.1191,46.5,726.1191,56.5,730.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50.5" x2="591" y1="726.1191" y2="726.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="252.25" y="721.377">render error message</text><polygon fill="#181818" points="1337.5,758.4297,1347.5,762.4297,1337.5,766.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="980" x2="1343.5" y1="762.4297" y2="762.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1101.75" y="757.6875">build request object</text><polygon fill="#181818" points="2087.5,787.7402,2097.5,791.7402,2087.5,795.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1349.5" x2="2093.5" y1="791.7402" y2="791.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1655.5" y="786.998">send backend request</text><polygon fill="#181818" points="1360.5,817.0508,1350.5,821.0508,1360.5,825.0508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1354.5" x2="2098.5" y1="821.0508" y2="821.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1686" y="816.3086">ok response</text><polygon fill="#181818" points="991,846.3613,981,850.3613,991,854.3613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="985" x2="1348.5" y1="850.3613" y2="850.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1116.75" y="845.6191">resolve request</text><polygon fill="#181818" points="778.5,875.6719,768.5,879.6719,778.5,883.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="772.5" x2="979" y1="879.6719" y2="879.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="821.25" y="874.9297">redirect to inbox</text><polygon fill="#181818" points="463.5,904.9824,453.5,908.9824,463.5,912.9824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="457.5" x2="766.5" y1="908.9824" y2="908.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="557.5" y="904.2402">redirect to inbox</text><polygon fill="#181818" points="56.5,934.293,46.5,938.293,56.5,942.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="451.5" y1="938.293" y2="938.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="57.5" y="933.5508">redirect to updated juror record and display deceased banner</text><path d="M10,953.293 L72,953.293 L72,960.6035 L62,970.6035 L10,970.6035 L10,953.293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="2170" x="10" y="953.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="966.8613">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="189" x="87" y="965.9277">[Failed to process deceased juror]</text><polygon fill="#181818" points="1360.5,987.9141,1350.5,991.9141,1360.5,995.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1354.5" x2="2098.5" y1="991.9141" y2="991.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1679" y="987.1719">error response</text><polygon fill="#181818" points="991,1017.2246,981,1021.2246,991,1025.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="985" x2="1348.5" y1="1021.2246" y2="1021.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1106.75" y="1016.4824">reject requestBody</text><polygon fill="#181818" points="603,1046.5352,593,1050.5352,603,1054.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="597" x2="979" y1="1050.5352" y2="1050.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="740.5" y="1045.793">error response</text><polygon fill="#181818" points="56.5,1075.8457,46.5,1079.8457,56.5,1083.8457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50.5" x2="591" y1="1079.8457" y2="1079.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="252.25" y="1075.1035">render error message</text><!--MD5=[c885910b1c1ef3b6047384284eb4c312]
@startuml juror-update-deceased

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

''' LOCAL ROUTING
participant JurorRecordPage <</record>>
participant JurorUpdatePage <</update>>

''' CONTROLLER AND REQUEST OBJECTS
participant JurorRecordController <<juror-record.controller.js>>
participant JurorUpdateController <<juror-update.controller.js>>
participant JurorRecordObject <<record.get()>>
participant JurorDeceasedObject <<jurorDeceasedObject.post()>>

''' TEMPLATES
participant JurorRecordUpdateTemplate <<juror-management/update-juror-record.njk>>

''' FILTERS AND VALIDATORS
participant JurorRecordUpdateValidator

''' BACKEND CONTROLLER
participant BackendController


''' JOURNEY FLOW
Actor -> JurorUpdatePage : update juror record

JurorUpdatePage -> JurorUpdateController : call page controller

JurorUpdateController -> JurorRecordObject : build request object
JurorRecordObject -> BackendController : send backend request
JurorRecordObject <- BackendController : ok response
JurorUpdateController <- JurorRecordObject : resolve request

JurorUpdateController -> JurorRecordUpdateTemplate : request and build template
JurorUpdateController <- JurorRecordUpdateTemplate : return HTML
JurorUpdatePage <- JurorUpdateController : return HTML
Actor <- JurorUpdatePage : render HTML

alt Failed to retrieve juror record details
    JurorRecordObject <- - BackendController : error response
    JurorUpdateController <- - JurorRecordObject : reject requestObject
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

Actor -> JurorUpdatePage : Select deceased and enter comment
JurorUpdatePage -> JurorUpdateController : call page controller
JurorUpdateController -> JurorRecordUpdateValidator : validate selection and comment
JurorUpdateController <- JurorRecordUpdateValidator : selection and comment are valid

alt Deceased selection or comment is invalid or missing
    JurorUpdateController <- - JurorRecordUpdateValidator : reason or decision is invalid or missing
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

JurorUpdateController -> JurorDeceasedObject : build request object
JurorDeceasedObject -> BackendController : send backend request
JurorDeceasedObject <- BackendController : ok response
JurorUpdateController <- JurorDeceasedObject : resolve request

JurorUpdateController -> JurorRecordController : redirect to inbox
JurorRecordPage <- JurorRecordController : redirect to inbox
Actor <- JurorRecordPage : redirect to updated juror record and display deceased banner

alt Failed to process deceased juror
    JurorDeceasedObject <- - BackendController : error response
    JurorUpdateController <- - JurorDeceasedObject : reject requestBody
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

@enduml

@startuml juror-update-deceased

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

participant JurorRecordPage <</record>>
participant JurorUpdatePage <</update>>

participant JurorRecordController <<juror-record.controller.js>>
participant JurorUpdateController <<juror-update.controller.js>>
participant JurorRecordObject <<record.get()>>
participant JurorDeceasedObject <<jurorDeceasedObject.post()>>

participant JurorRecordUpdateTemplate <<juror-management/update-juror-record.njk>>

participant JurorRecordUpdateValidator

participant BackendController


Actor -> JurorUpdatePage : update juror record

JurorUpdatePage -> JurorUpdateController : call page controller

JurorUpdateController -> JurorRecordObject : build request object
JurorRecordObject -> BackendController : send backend request
JurorRecordObject <- BackendController : ok response
JurorUpdateController <- JurorRecordObject : resolve request

JurorUpdateController -> JurorRecordUpdateTemplate : request and build template
JurorUpdateController <- JurorRecordUpdateTemplate : return HTML
JurorUpdatePage <- JurorUpdateController : return HTML
Actor <- JurorUpdatePage : render HTML

alt Failed to retrieve juror record details
    JurorRecordObject <- - BackendController : error response
    JurorUpdateController <- - JurorRecordObject : reject requestObject
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

Actor -> JurorUpdatePage : Select deceased and enter comment
JurorUpdatePage -> JurorUpdateController : call page controller
JurorUpdateController -> JurorRecordUpdateValidator : validate selection and comment
JurorUpdateController <- JurorRecordUpdateValidator : selection and comment are valid

alt Deceased selection or comment is invalid or missing
    JurorUpdateController <- - JurorRecordUpdateValidator : reason or decision is invalid or missing
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

JurorUpdateController -> JurorDeceasedObject : build request object
JurorDeceasedObject -> BackendController : send backend request
JurorDeceasedObject <- BackendController : ok response
JurorUpdateController <- JurorDeceasedObject : resolve request

JurorUpdateController -> JurorRecordController : redirect to inbox
JurorRecordPage <- JurorRecordController : redirect to inbox
Actor <- JurorRecordPage : redirect to updated juror record and display deceased banner

alt Failed to process deceased juror
    JurorDeceasedObject <- - BackendController : error response
    JurorUpdateController <- - JurorDeceasedObject : reject requestBody
    JurorUpdatePage <- - JurorUpdateController : error response
    Actor <- - JurorUpdatePage : render error message
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>