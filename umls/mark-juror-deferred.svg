<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2442px" preserveAspectRatio="none" style="width:3066px;height:2442px;background:#FFFFFF;" version="1.1" viewBox="0 0 3066 2442" width="3066px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="429.6582" style="stroke:#000000;stroke-width:1.5;" width="2649" x="10" y="128.5977"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2629" x="20" y="387.3926"/><rect fill="none" height="607.5215" style="stroke:#000000;stroke-width:1.5;" width="3050" x="10" y="572.2559"/><rect fill="none" height="310.416" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="713.8086"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1038.2246"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1311.0195"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1576.8145"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2879" x="20" y="1959.8516"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="2254.957"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="464" x2="464" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="595" x2="595" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="699" x2="699" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="892" x2="892" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1137" x2="1137" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1336" x2="1336" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1541" x2="1541" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1728" x2="1728" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1975" x2="1975" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2286" x2="2286" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2537" x2="2537" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2769" x2="2769" y1="52.9766" y2="2435.8203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2969" x2="2969" y1="52.9766" y2="2435.8203"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="30" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="37" y="42.0234">Actor</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="293" x="91" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="279" x="98" y="25.5352">«/response/{id}/{paper|digital}/process»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="162" y="42.0234">ProcessResponsePage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="394" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="120" x="404" y="25.5352">«/deferral-dates»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="401" y="42.0234">DeferralDatesPage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="544" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="75" x="557.5" y="25.5352">«/deferral»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="551" y="42.0234">DeferralPage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="656" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="669" y="25.5352">«/inbox»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="663" y="42.0234">InboxPage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="279" x="753" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="265" x="760" y="25.5352">«summons-management.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="779" y="42.0234">SummonsManagementController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="1042" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="177" x="1049" y="25.5352">«preferredDatesObj.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1074.5" y="42.0234">PreferredDatesObj</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="1243" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="173" x="1250" y="25.5352">«deferralPoolsObj.post()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1278.5" y="42.0234">DeferralPoolsObj</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203" x="1440" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="189" x="1447" y="25.5352">«excusalCodesObject.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="1482" y="42.0234">ExcusalCodesObj</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="1653" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="136" x="1660" y="25.5352">«deferralObj.post()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1688.5" y="42.0234">DeferralObj</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="324" x="1813" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="310" x="1820" y="25.5352">«summons-management/deferral-dates.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="1896.5" y="42.0234">DeferralDatesTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="279" x="2147" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="265" x="2154" y="25.5352">«summons-management/deferral.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="2227" y="42.0234">DeferralTemplate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203" x="2436" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="2443" y="42.0234">DeferralDatePickerValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="240" x="2649" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="226" x="2656" y="42.0234">DeferralDateAndReasonValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="2899" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2906" y="42.0234">BackendController</text><polygon fill="#181818" points="225.5,80.2871,235.5,84.2871,225.5,88.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="231.5" y1="84.2871" y2="84.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="71.5" y="79.5449">request deferal for juror</text><polygon fill="#181818" points="880.5,109.5977,890.5,113.5977,880.5,117.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="237.5" x2="886.5" y1="113.5977" y2="113.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="504.5" y="108.8555">call page controller</text><path d="M10,128.5977 L72,128.5977 L72,135.9082 L62,145.9082 L10,145.9082 L10,128.5977 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="429.6582" style="stroke:#000000;stroke-width:1.5;" width="2649" x="10" y="128.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="142.166">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="87" y="141.2324">[Paper summons reply]</text><polygon fill="#181818" points="1963,163.2188,1973,167.2188,1963,171.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1969" y1="167.2188" y2="167.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1349.25" y="162.4766">request and build template</text><polygon fill="#181818" points="903.5,192.5293,893.5,196.5293,903.5,200.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1974" y1="196.5293" y2="196.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1394.75" y="191.7871">return HTML</text><polygon fill="#181818" points="475,221.8398,465,225.8398,475,229.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="469" x2="891.5" y1="225.8398" y2="225.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="639.25" y="221.0977">return HTML</text><polygon fill="#181818" points="66.5,251.1504,56.5,255.1504,66.5,259.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="463" y1="255.1504" y2="255.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="219.75" y="250.4082">render HTML</text><polygon fill="#181818" points="452,280.4609,462,284.4609,452,288.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="458" y1="284.4609" y2="284.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="181.75" y="279.7188">enter valid deferral dates</text><polygon fill="#181818" points="880.5,309.7715,890.5,313.7715,880.5,317.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="464" x2="886.5" y1="313.7715" y2="313.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="619.25" y="309.0293">post deferral dates</text><polygon fill="#181818" points="2525.5,339.082,2535.5,343.082,2525.5,347.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="2531.5" y1="343.082" y2="343.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1645.5" y="338.3398">validate deferral dates</text><polygon fill="#181818" points="903.5,368.3926,893.5,372.3926,903.5,376.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="2536.5" y1="372.3926" y2="372.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1681" y="367.6504">valid dates</text><path d="M20,387.3926 L82,387.3926 L82,394.7031 L72,404.7031 L20,404.7031 L20,387.3926 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2629" x="20" y="387.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="400.9609">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="97" y="400.0273">[Invalid deferral dates]</text><polygon fill="#181818" points="903.5,422.0137,893.5,426.0137,903.5,430.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="2536.5" y1="426.0137" y2="426.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1681" y="421.2715">valid dates</text><polygon fill="#181818" points="1963,451.3242,1973,455.3242,1963,459.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="892.5" x2="1969" y1="455.3242" y2="455.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1349.25" y="450.582">request and build template</text><polygon fill="#181818" points="903.5,480.6348,893.5,484.6348,903.5,488.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="1974" y1="484.6348" y2="484.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="1332.75" y="479.8926">return HTML with error message</text><polygon fill="#181818" points="475,509.9453,465,513.9453,475,517.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469" x2="891.5" y1="513.9453" y2="513.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="577.25" y="509.2031">return HTML with error message</text><polygon fill="#181818" points="66.5,539.2559,56.5,543.2559,66.5,547.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="463" y1="543.2559" y2="543.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="193.25" y="538.5137">render error message</text><path d="M10,572.2559 L72,572.2559 L72,579.5664 L62,589.5664 L10,589.5664 L10,572.2559 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="607.5215" style="stroke:#000000;stroke-width:1.5;" width="3050" x="10" y="572.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="585.8242">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137" x="87" y="584.8906">[Digital summons reply]</text><polygon fill="#181818" points="1125.5,606.877,1135.5,610.877,1125.5,614.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1131.5" y1="610.877" y2="610.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="952" y="606.1348">build request object</text><polygon fill="#181818" points="2957.5,636.1875,2967.5,640.1875,2957.5,644.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1137.5" x2="2963.5" y1="640.1875" y2="640.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1984.5" y="635.4453">send backend request</text><polygon fill="#181818" points="1148.5,665.498,1138.5,669.498,1148.5,673.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1142.5" x2="2968.5" y1="669.498" y2="669.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="2015" y="664.7559">ok response</text><polygon fill="#181818" points="903.5,694.8086,893.5,698.8086,903.5,702.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1136.5" y1="698.8086" y2="698.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="967" y="694.0664">resolve request</text><path d="M20,713.8086 L82,713.8086 L82,721.1191 L72,731.1191 L20,731.1191 L20,713.8086 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="310.416" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="713.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="727.377">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="260" x="97" y="726.4434">[Digital reply - does not have preferred dates]</text><polygon fill="#181818" points="1148.5,748.4297,1138.5,752.4297,1148.5,756.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1142.5" x2="2968.5" y1="752.4297" y2="752.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="1938" y="747.6875">ok response - NO PREFERRED DATES</text><polygon fill="#181818" points="903.5,777.7402,893.5,781.7402,903.5,785.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1136.5" y1="781.7402" y2="781.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="967" y="776.998">resolve request</text><polygon fill="#181818" points="1963,807.0508,1973,811.0508,1963,815.0508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1969" y1="811.0508" y2="811.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1349.25" y="806.3086">request and build template</text><polygon fill="#181818" points="903.5,836.3613,893.5,840.3613,903.5,844.3613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1974" y1="840.3613" y2="840.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1394.75" y="835.6191">return HTML</text><polygon fill="#181818" points="475,865.6719,465,869.6719,475,873.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="469" x2="891.5" y1="869.6719" y2="869.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="639.25" y="864.9297">return HTML</text><polygon fill="#181818" points="66.5,894.9824,56.5,898.9824,66.5,902.9824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="463" y1="898.9824" y2="898.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="219.75" y="894.2402">render HTML</text><polygon fill="#181818" points="452,924.293,462,928.293,452,932.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="458" y1="928.293" y2="928.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="181.75" y="923.5508">enter valid deferral dates</text><polygon fill="#181818" points="880.5,953.6035,890.5,957.6035,880.5,961.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="464" x2="886.5" y1="957.6035" y2="957.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="619.25" y="952.8613">post deferral dates</text><polygon fill="#181818" points="2525.5,982.9141,2535.5,986.9141,2525.5,990.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="2531.5" y1="986.9141" y2="986.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1645.5" y="982.1719">validate deferral dates</text><polygon fill="#181818" points="903.5,1012.2246,893.5,1016.2246,903.5,1020.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="2536.5" y1="1016.2246" y2="1016.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1681" y="1011.4824">valid dates</text><path d="M20,1038.2246 L82,1038.2246 L82,1045.5352 L72,1055.5352 L20,1055.5352 L20,1038.2246 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1038.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1051.793">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="97" y="1050.8594">[Failed to retreive preferred dates]</text><polygon fill="#181818" points="1148.5,1072.8457,1138.5,1076.8457,1148.5,1080.8457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1142.5" x2="2968.5" y1="1076.8457" y2="1076.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="2008" y="1072.1035">error response</text><polygon fill="#181818" points="903.5,1102.1563,893.5,1106.1563,903.5,1110.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="1136.5" y1="1106.1563" y2="1106.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="945" y="1101.4141">resolve error response</text><polygon fill="#181818" points="475,1131.4668,465,1135.4668,475,1139.4668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469" x2="891.5" y1="1135.4668" y2="1135.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="632.75" y="1130.7246">error response</text><polygon fill="#181818" points="66.5,1160.7773,56.5,1164.7773,66.5,1168.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="463" y1="1164.7773" y2="1164.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="193.25" y="1160.0352">render error message</text><polygon fill="#181818" points="1324.5,1204.0879,1334.5,1208.0879,1324.5,1212.0879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1330.5" y1="1208.0879" y2="1208.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1051.5" y="1203.3457">build request object</text><polygon fill="#181818" points="2957.5,1233.3984,2967.5,1237.3984,2957.5,1241.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1336.5" x2="2963.5" y1="1237.3984" y2="1237.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2084" y="1232.6563">send backend request</text><polygon fill="#181818" points="1347.5,1262.709,1337.5,1266.709,1347.5,1270.709" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1341.5" x2="2968.5" y1="1266.709" y2="1266.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="2114.5" y="1261.9668">ok response</text><polygon fill="#181818" points="903.5,1292.0195,893.5,1296.0195,903.5,1300.0195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1335.5" y1="1296.0195" y2="1296.0195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1066.5" y="1291.2773">resolve request</text><path d="M20,1311.0195 L82,1311.0195 L82,1318.3301 L72,1328.3301 L20,1328.3301 L20,1311.0195 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1311.0195"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1324.5879">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="97" y="1323.6543">[Failed to fetch pool options]</text><polygon fill="#181818" points="1347.5,1345.6406,1337.5,1349.6406,1347.5,1353.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1341.5" x2="2968.5" y1="1349.6406" y2="1349.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="2107.5" y="1344.8984">error response</text><polygon fill="#181818" points="903.5,1374.9512,893.5,1378.9512,903.5,1382.9512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="1335.5" y1="1378.9512" y2="1378.9512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="1044.5" y="1374.209">resolve error response</text><polygon fill="#181818" points="606,1404.2617,596,1408.2617,606,1412.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="600" x2="891.5" y1="1408.2617" y2="1408.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="698.25" y="1403.5195">error response</text><polygon fill="#181818" points="66.5,1433.5723,56.5,1437.5723,66.5,1441.5723" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="594" y1="1437.5723" y2="1437.5723"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="258.75" y="1432.8301">render error message</text><polygon fill="#181818" points="1529.5,1469.8828,1539.5,1473.8828,1529.5,1477.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1535.5" y1="1473.8828" y2="1473.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1154" y="1469.1406">build request object</text><polygon fill="#181818" points="2957.5,1499.1934,2967.5,1503.1934,2957.5,1507.1934" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1541.5" x2="2963.5" y1="1503.1934" y2="1503.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2186.5" y="1498.4512">send backend request</text><polygon fill="#181818" points="1552.5,1528.5039,1542.5,1532.5039,1552.5,1536.5039" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1546.5" x2="2968.5" y1="1532.5039" y2="1532.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="2217" y="1527.7617">ok response</text><polygon fill="#181818" points="903.5,1557.8145,893.5,1561.8145,903.5,1565.8145" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1540.5" y1="1561.8145" y2="1561.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1169" y="1557.0723">resolve request</text><path d="M20,1576.8145 L82,1576.8145 L82,1584.125 L72,1594.125 L20,1594.125 L20,1576.8145 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="1576.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1590.3828">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="184" x="97" y="1589.4492">[Failed to retreive excusal codes]</text><polygon fill="#181818" points="1552.5,1611.4355,1542.5,1615.4355,1552.5,1619.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1546.5" x2="2968.5" y1="1615.4355" y2="1615.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="2210" y="1610.6934">error response</text><polygon fill="#181818" points="903.5,1640.7461,893.5,1644.7461,903.5,1648.7461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="1540.5" y1="1644.7461" y2="1644.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="1147" y="1640.0039">resolve error response</text><polygon fill="#181818" points="606,1670.0566,596,1674.0566,606,1678.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="600" x2="891.5" y1="1674.0566" y2="1674.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="698.25" y="1669.3145">error response</text><polygon fill="#181818" points="66.5,1699.3672,56.5,1703.3672,66.5,1707.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="594" y1="1703.3672" y2="1703.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="258.75" y="1698.625">render error message</text><polygon fill="#181818" points="2274.5,1735.6777,2284.5,1739.6777,2274.5,1743.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="2280.5" y1="1739.6777" y2="1739.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1505" y="1734.9355">request and build template</text><polygon fill="#181818" points="903.5,1764.9883,893.5,1768.9883,903.5,1772.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="2285.5" y1="1768.9883" y2="1768.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1550.5" y="1764.2461">return HTML</text><polygon fill="#181818" points="606,1794.2988,596,1798.2988,606,1802.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="600" x2="891.5" y1="1798.2988" y2="1798.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="704.75" y="1793.5566">return HTML</text><polygon fill="#181818" points="66.5,1823.6094,56.5,1827.6094,66.5,1831.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="594" y1="1827.6094" y2="1827.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="285.25" y="1822.8672">render HTML</text><polygon fill="#181818" points="583,1852.9199,593,1856.9199,583,1860.9199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="589" y1="1856.9199" y2="1856.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="195.75" y="1852.1777">select deferral reason and deferral option</text><polygon fill="#181818" points="880.5,1882.2305,890.5,1886.2305,880.5,1890.2305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="595" x2="886.5" y1="1886.2305" y2="1886.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="677.75" y="1881.4883">post deferral options</text><polygon fill="#181818" points="2757,1911.541,2767,1915.541,2757,1919.541" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="2763" y1="1915.541" y2="1915.541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="1747.25" y="1910.7988">validate reason and option</text><polygon fill="#181818" points="903.5,1940.8516,893.5,1944.8516,903.5,1948.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="2768" y1="1944.8516" y2="1944.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1756.75" y="1940.1094">valid reason and option</text><path d="M20,1959.8516 L82,1959.8516 L82,1967.1621 L72,1977.1621 L20,1977.1621 L20,1959.8516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2879" x="20" y="1959.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1973.4199">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="144" x="97" y="1972.4863">[Invalid reason or option]</text><polygon fill="#181818" points="903.5,1994.4727,893.5,1998.4727,903.5,2002.4727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="2768" y1="1998.4727" y2="1998.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1796.75" y="1993.7305">valid dates</text><polygon fill="#181818" points="2274.5,2023.7832,2284.5,2027.7832,2274.5,2031.7832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="892.5" x2="2280.5" y1="2027.7832" y2="2027.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1505" y="2023.041">request and build template</text><polygon fill="#181818" points="903.5,2053.0938,893.5,2057.0938,903.5,2061.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="2285.5" y1="2057.0938" y2="2057.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="1488.5" y="2052.3516">return HTML with error message</text><polygon fill="#181818" points="606,2082.4043,596,2086.4043,606,2090.4043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="600" x2="891.5" y1="2086.4043" y2="2086.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="642.75" y="2081.6621">return HTML with error message</text><polygon fill="#181818" points="66.5,2111.7148,56.5,2115.7148,66.5,2119.7148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="594" y1="2115.7148" y2="2115.7148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="258.75" y="2110.9727">render error message</text><polygon fill="#181818" points="1716,2148.0254,1726,2152.0254,1716,2156.0254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="892.5" x2="1722" y1="2152.0254" y2="2152.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1247.25" y="2147.2832">build request object</text><polygon fill="#181818" points="2957.5,2177.3359,2967.5,2181.3359,2957.5,2185.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1728" x2="2963.5" y1="2181.3359" y2="2181.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2279.75" y="2176.5938">send backend request</text><polygon fill="#181818" points="1739,2206.6465,1729,2210.6465,1739,2214.6465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1733" x2="2968.5" y1="2210.6465" y2="2210.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="2310.25" y="2205.9043">ok response</text><polygon fill="#181818" points="903.5,2235.957,893.5,2239.957,903.5,2243.957" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="897.5" x2="1727" y1="2239.957" y2="2239.957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1262.25" y="2235.2148">resolve request</text><path d="M20,2254.957 L82,2254.957 L82,2262.2676 L72,2272.2676 L20,2272.2676 L20,2254.957 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="3030" x="20" y="2254.957"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="2268.5254">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="153" x="97" y="2267.5918">[Failed to process Deferral]</text><polygon fill="#181818" points="903.5,2289.5781,893.5,2293.5781,903.5,2297.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="897.5" x2="2968.5" y1="2293.5781" y2="2293.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1885.5" y="2288.8359">error response</text><polygon fill="#181818" points="606,2318.8887,596,2322.8887,606,2326.8887" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="600" x2="891.5" y1="2322.8887" y2="2322.8887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="698.25" y="2318.1465">error response</text><polygon fill="#181818" points="66.5,2348.1992,56.5,2352.1992,66.5,2356.1992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="594" y1="2352.1992" y2="2352.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="258.75" y="2347.457">render error message</text><polygon fill="#181818" points="710.5,2384.5098,700.5,2388.5098,710.5,2392.5098" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="891.5" y1="2388.5098" y2="2388.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="743.5" y="2383.7676">redirect to inbox</text><polygon fill="#181818" points="66.5,2413.8203,56.5,2417.8203,66.5,2421.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="698.5" y1="2417.8203" y2="2417.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="325" y="2413.0781">redirect to inbox</text><!--MD5=[bd8ee5403cc5437f29605860635e688b]
@startuml mark-juror-deferred

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

''' LOCAL ROUTING
participant ProcessResponsePage <</response/{id}/{paper|digital}/process>>
participant DeferralDatesPage <</deferral-dates>>
participant DeferralPage <</deferral>>
participant InboxPage <</inbox>>

''' CONTROLLER AND REQUEST OBJECTS
participant SummonsManagementController <<summons-management.controller.js>>
participant PreferredDatesObj <<preferredDatesObj.get()>>
participant DeferralPoolsObj <<deferralPoolsObj.post()>>
participant ExcusalCodesObj <<excusalCodesObject.get()>>
participant DeferralObj <<deferralObj.post()>>


''' TEMPLATES
participant DeferralDatesTemplate <<summons-management/deferral-dates.njk>>
participant DeferralTemplate <<summons-management/deferral.njk>>

''' FILTERS AND VALIDATORS
participant DeferralDatePickerValidator
participant DeferralDateAndReasonValidator

''' BACKEND CONTROLLER
participant BackendController

''' JOURNEY FLOW
Actor -> ProcessResponsePage : request deferal for juror

ProcessResponsePage -> SummonsManagementController : call page controller

alt Paper summons reply
    SummonsManagementController -> DeferralDatesTemplate : request and build template
    SummonsManagementController <- DeferralDatesTemplate : return HTML
    DeferralDatesPage <- SummonsManagementController : return HTML
    Actor <- DeferralDatesPage : render HTML

    Actor -> DeferralDatesPage : enter valid deferral dates

    DeferralDatesPage -> SummonsManagementController : post deferral dates
    SummonsManagementController -> DeferralDatePickerValidator : validate deferral dates
    SummonsManagementController <- DeferralDatePickerValidator : valid dates

    alt Invalid deferral dates
        SummonsManagementController <- - DeferralDatePickerValidator : valid dates
        SummonsManagementController - -> DeferralDatesTemplate : request and build template
        SummonsManagementController <- - DeferralDatesTemplate : return HTML with error message
        DeferralDatesPage <- - SummonsManagementController : return HTML with error message
        Actor <- - DeferralDatesPage : render error message
    end
end

alt Digital summons reply
    SummonsManagementController -> PreferredDatesObj : build request object
    PreferredDatesObj -> BackendController : send backend request
    PreferredDatesObj <- BackendController : ok response
    SummonsManagementController <- PreferredDatesObj : resolve request

    alt Digital reply - does not have preferred dates
        PreferredDatesObj <- BackendController : ok response - NO PREFERRED DATES
        SummonsManagementController <- PreferredDatesObj : resolve request

        SummonsManagementController -> DeferralDatesTemplate : request and build template
        SummonsManagementController <- DeferralDatesTemplate : return HTML
        DeferralDatesPage <- SummonsManagementController : return HTML
        Actor <- DeferralDatesPage : render HTML

        Actor -> DeferralDatesPage : enter valid deferral dates

        DeferralDatesPage -> SummonsManagementController : post deferral dates
        SummonsManagementController -> DeferralDatePickerValidator : validate deferral dates
        SummonsManagementController <- DeferralDatePickerValidator : valid dates
    end

    alt Failed to retreive preferred dates
        PreferredDatesObj <- - BackendController : error response
        SummonsManagementController <- - PreferredDatesObj : resolve error response
        DeferralDatesPage <- - SummonsManagementController : error response
        Actor <- - DeferralDatesPage : render error message  
    end
end

SummonsManagementController -> DeferralPoolsObj : build request object
DeferralPoolsObj -> BackendController : send backend request
DeferralPoolsObj <- BackendController : ok response
SummonsManagementController <- DeferralPoolsObj : resolve request

alt Failed to fetch pool options
    DeferralPoolsObj <- - BackendController : error response
    SummonsManagementController <- - DeferralPoolsObj : resolve error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> ExcusalCodesObj : build request object
ExcusalCodesObj -> BackendController : send backend request
ExcusalCodesObj <- BackendController : ok response
SummonsManagementController <- ExcusalCodesObj : resolve request

alt Failed to retreive excusal codes
    ExcusalCodesObj <- - BackendController : error response
    SummonsManagementController <- - ExcusalCodesObj : resolve error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> DeferralTemplate : request and build template
SummonsManagementController <- DeferralTemplate : return HTML
DeferralPage <- SummonsManagementController : return HTML
Actor <- DeferralPage : render HTML

Actor -> DeferralPage : select deferral reason and deferral option

DeferralPage -> SummonsManagementController : post deferral options
SummonsManagementController -> DeferralDateAndReasonValidator : validate reason and option
SummonsManagementController <- DeferralDateAndReasonValidator : valid reason and option

alt Invalid reason or option
    SummonsManagementController <- - DeferralDateAndReasonValidator : valid dates
    SummonsManagementController - -> DeferralTemplate : request and build template
    SummonsManagementController <- - DeferralTemplate : return HTML with error message
    DeferralPage <- - SummonsManagementController : return HTML with error message
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> DeferralObj : build request object
DeferralObj -> BackendController : send backend request
DeferralObj <- BackendController : ok response
SummonsManagementController <- DeferralObj : resolve request

alt Failed to process Deferral
    SummonsManagementController <- - BackendController : error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

InboxPage <- SummonsManagementController : redirect to inbox
Actor <- InboxPage : redirect to inbox




@enduml

@startuml mark-juror-deferred

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

participant ProcessResponsePage <</response/{id}/{paper|digital}/process>>
participant DeferralDatesPage <</deferral-dates>>
participant DeferralPage <</deferral>>
participant InboxPage <</inbox>>

participant SummonsManagementController <<summons-management.controller.js>>
participant PreferredDatesObj <<preferredDatesObj.get()>>
participant DeferralPoolsObj <<deferralPoolsObj.post()>>
participant ExcusalCodesObj <<excusalCodesObject.get()>>
participant DeferralObj <<deferralObj.post()>>


participant DeferralDatesTemplate <<summons-management/deferral-dates.njk>>
participant DeferralTemplate <<summons-management/deferral.njk>>

participant DeferralDatePickerValidator
participant DeferralDateAndReasonValidator

participant BackendController

Actor -> ProcessResponsePage : request deferal for juror

ProcessResponsePage -> SummonsManagementController : call page controller

alt Paper summons reply
    SummonsManagementController -> DeferralDatesTemplate : request and build template
    SummonsManagementController <- DeferralDatesTemplate : return HTML
    DeferralDatesPage <- SummonsManagementController : return HTML
    Actor <- DeferralDatesPage : render HTML

    Actor -> DeferralDatesPage : enter valid deferral dates

    DeferralDatesPage -> SummonsManagementController : post deferral dates
    SummonsManagementController -> DeferralDatePickerValidator : validate deferral dates
    SummonsManagementController <- DeferralDatePickerValidator : valid dates

    alt Invalid deferral dates
        SummonsManagementController <- - DeferralDatePickerValidator : valid dates
        SummonsManagementController - -> DeferralDatesTemplate : request and build template
        SummonsManagementController <- - DeferralDatesTemplate : return HTML with error message
        DeferralDatesPage <- - SummonsManagementController : return HTML with error message
        Actor <- - DeferralDatesPage : render error message
    end
end

alt Digital summons reply
    SummonsManagementController -> PreferredDatesObj : build request object
    PreferredDatesObj -> BackendController : send backend request
    PreferredDatesObj <- BackendController : ok response
    SummonsManagementController <- PreferredDatesObj : resolve request

    alt Digital reply - does not have preferred dates
        PreferredDatesObj <- BackendController : ok response - NO PREFERRED DATES
        SummonsManagementController <- PreferredDatesObj : resolve request

        SummonsManagementController -> DeferralDatesTemplate : request and build template
        SummonsManagementController <- DeferralDatesTemplate : return HTML
        DeferralDatesPage <- SummonsManagementController : return HTML
        Actor <- DeferralDatesPage : render HTML

        Actor -> DeferralDatesPage : enter valid deferral dates

        DeferralDatesPage -> SummonsManagementController : post deferral dates
        SummonsManagementController -> DeferralDatePickerValidator : validate deferral dates
        SummonsManagementController <- DeferralDatePickerValidator : valid dates
    end

    alt Failed to retreive preferred dates
        PreferredDatesObj <- - BackendController : error response
        SummonsManagementController <- - PreferredDatesObj : resolve error response
        DeferralDatesPage <- - SummonsManagementController : error response
        Actor <- - DeferralDatesPage : render error message  
    end
end

SummonsManagementController -> DeferralPoolsObj : build request object
DeferralPoolsObj -> BackendController : send backend request
DeferralPoolsObj <- BackendController : ok response
SummonsManagementController <- DeferralPoolsObj : resolve request

alt Failed to fetch pool options
    DeferralPoolsObj <- - BackendController : error response
    SummonsManagementController <- - DeferralPoolsObj : resolve error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> ExcusalCodesObj : build request object
ExcusalCodesObj -> BackendController : send backend request
ExcusalCodesObj <- BackendController : ok response
SummonsManagementController <- ExcusalCodesObj : resolve request

alt Failed to retreive excusal codes
    ExcusalCodesObj <- - BackendController : error response
    SummonsManagementController <- - ExcusalCodesObj : resolve error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> DeferralTemplate : request and build template
SummonsManagementController <- DeferralTemplate : return HTML
DeferralPage <- SummonsManagementController : return HTML
Actor <- DeferralPage : render HTML

Actor -> DeferralPage : select deferral reason and deferral option

DeferralPage -> SummonsManagementController : post deferral options
SummonsManagementController -> DeferralDateAndReasonValidator : validate reason and option
SummonsManagementController <- DeferralDateAndReasonValidator : valid reason and option

alt Invalid reason or option
    SummonsManagementController <- - DeferralDateAndReasonValidator : valid dates
    SummonsManagementController - -> DeferralTemplate : request and build template
    SummonsManagementController <- - DeferralTemplate : return HTML with error message
    DeferralPage <- - SummonsManagementController : return HTML with error message
    Actor <- - DeferralPage : render error message
end

SummonsManagementController -> DeferralObj : build request object
DeferralObj -> BackendController : send backend request
DeferralObj <- BackendController : ok response
SummonsManagementController <- DeferralObj : resolve request

alt Failed to process Deferral
    SummonsManagementController <- - BackendController : error response
    DeferralPage <- - SummonsManagementController : error response
    Actor <- - DeferralPage : render error message
end

InboxPage <- SummonsManagementController : redirect to inbox
Actor <- InboxPage : redirect to inbox




@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>