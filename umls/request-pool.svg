<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3222px" preserveAspectRatio="none" style="width:5160px;height:3222px;background:#FFFFFF;" version="1.1" viewBox="0 0 5160 3222" width="5160px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4250" x="10" y="333.7715"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4230" x="20" y="680.498"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4367" x="10" y="806.7402"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4347" x="20" y="1153.4668"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4487" x="10" y="1279.709"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4467" x="20" y="1626.4355"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4635" x="10" y="1752.6777"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4615" x="20" y="2099.4043"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4806" x="10" y="2342.8887"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4786" x="20" y="2689.6152"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="4937" x="20" y="3064.3418"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="173" x2="173" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="396" x2="396" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="596" x2="596" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="724" x2="724" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="853" x2="853" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1025" x2="1025" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1242" x2="1242" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1433" x2="1433" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1583" x2="1583" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1750" x2="1750" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1974" x2="1974" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2208" x2="2208" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2396" x2="2396" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2580" x2="2580" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2768" x2="2768" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2948" x2="2948" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3133" x2="3133" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3338" x2="3338" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3573" x2="3573" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3792" x2="3792" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4007" x2="4007" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4182" x2="4182" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4303" x2="4303" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4422" x2="4422" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4556" x2="4556" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4715" x2="4715" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4876" x2="4876" y1="52.9766" y2="3215.8945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="5055" x2="5055" y1="52.9766" y2="3215.8945"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="30" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="37" y="42.0234">Actor</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="91" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="150" x="98" y="25.5352">«/pool-management»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="113.5" y="42.0234">PoolManagement</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="262" x="265" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="248" x="272" y="25.5352">«/pool-management/request-pool»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="379.5" y="42.0234">Page</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="537" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="544" y="25.5352">«/select-court»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="574.5" y="42.0234">Step 1</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="665" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="105" x="672" y="25.5352">«/pool-details»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="703" y="42.0234">Step 2</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="794" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="801" y="25.5352">«/select-court»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="825" y="42.0234">Step 2.1</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="922" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="193" x="929" y="25.5352">«/change-attendance-date»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="997.5" y="42.0234">Step 2.2</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="1139" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="193" x="1146" y="25.5352">«/change-attendance-time»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1214.5" y="42.0234">Step 2.3</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="1356" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="140" x="1363" y="25.5352">«/change-deferrals»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1405" y="42.0234">Step 2.4</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="1520" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="113" x="1527" y="25.5352">«/check-details»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="1562" y="42.0234">Step 3</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="1657" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="172" x="1664" y="25.5352">«/change-pool-number»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1722" y="42.0234">Step 3.1</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243" x="1853" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="229" x="1860" y="25.5352">«pool-management.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="1880" y="42.0234">PoolManagementController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="2106" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="191" x="2113" y="25.5352">«request-pool.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="2131" y="42.0234">RequestPoolController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="2321" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="136" x="2328" y="25.5352">«matchUserCourt()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2334" y="42.0234">MatchCourtObject</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="2481" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="185" x="2488" y="25.5352">«createPoolRequest.post()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="2503.5" y="42.0234">CreatePoolRequestObj</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="2690" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="122" x="2707.5" y="25.5352">«select-court.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2697" y="42.0234">SelectCourtTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="2857" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="169" x="2864" y="25.5352">«pool-details/index.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="2878.5" y="42.0234">PoolDetailsTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="3050" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="131" x="3067.5" y="25.5352">«check-details.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="3057" y="42.0234">CheckDetailsTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="3226" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="211" x="3233" y="25.5352">«change-attendance-date.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="3264.5" y="42.0234">ChangeDateTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="3461" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="211" x="3468" y="25.5352">«change-attendance-time.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="3498" y="42.0234">ChangeTimeTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="3696" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="158" x="3713.5" y="25.5352">«change-deferrals.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="3703" y="42.0234">ChangeDeferralsTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="216" x="3899" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="190" x="3912" y="25.5352">«change-pool-number.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="3906" y="42.0234">ChangePoolNumberTemplate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="4125" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="4132" y="42.0234">CourtValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="4250" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="4257" y="42.0234">DateValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="4367" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="4374" y="42.0234">TimeValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="4487" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="4494" y="42.0234">DeferralsValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="4635" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="4642" y="42.0234">PoolNumberValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="4806" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="4813" y="42.0234">BackendController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="4957" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="4964" y="42.0234">PoolManagementTemplate</text><polygon fill="#181818" points="384,80.2871,394,84.2871,384,88.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="390" y1="84.2871" y2="84.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="185.25" y="79.5449">request page</text><polygon fill="#181818" points="2196.5,109.5977,2206.5,113.5977,2196.5,117.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="396" x2="2202.5" y1="113.5977" y2="113.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1241.75" y="108.8555">call page controller</text><polygon fill="#181818" points="2756.5,138.9082,2766.5,142.9082,2756.5,146.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2762.5" y1="142.9082" y2="142.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2404" y="138.166">request and build template</text><polygon fill="#181818" points="607,168.2188,597,172.2188,607,176.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="601" x2="2767.5" y1="172.2188" y2="172.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1646.75" y="167.4766">return html</text><polygon fill="#181818" points="66.5,197.5293,56.5,201.5293,66.5,205.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="595" y1="201.5293" y2="201.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="289.25" y="196.7871">render html</text><polygon fill="#181818" points="2196.5,226.8398,2206.5,230.8398,2196.5,234.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="596" x2="2202.5" y1="230.8398" y2="230.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1341.75" y="226.0977">call page controller</text><polygon fill="#181818" points="2936.5,256.1504,2946.5,260.1504,2936.5,264.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="255.4082">request and build template</text><polygon fill="#181818" points="735.5,285.4609,725.5,289.4609,735.5,293.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="729.5" x2="2947.5" y1="289.4609" y2="289.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1801" y="284.7188">return html</text><polygon fill="#181818" points="66.5,314.7715,56.5,318.7715,66.5,322.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="723.5" y1="318.7715" y2="318.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="353.5" y="314.0293">render html</text><path d="M10,333.7715 L72,333.7715 L72,341.082 L62,351.082 L10,351.082 L10,333.7715 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4250" x="10" y="333.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="347.3398">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="87" y="346.4063">[Change court location]</text><polygon fill="#181818" points="2196.5,368.3926,2206.5,372.3926,2196.5,376.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724.5" x2="2202.5" y1="372.3926" y2="372.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1406" y="367.6504">call page controller</text><polygon fill="#181818" points="2756.5,397.7031,2766.5,401.7031,2756.5,405.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2762.5" y1="401.7031" y2="401.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2404" y="396.9609">request and build template</text><polygon fill="#181818" points="864,427.0137,854,431.0137,864,435.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="858" x2="2767.5" y1="431.0137" y2="431.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1775.25" y="426.2715">return html</text><polygon fill="#181818" points="66.5,456.3242,56.5,460.3242,66.5,464.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="852" y1="460.3242" y2="460.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="417.75" y="455.582">render html</text><polygon fill="#181818" points="841,485.6348,851,489.6348,841,493.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="847" y1="489.6348" y2="489.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="397.25" y="484.8926">select a new court</text><polygon fill="#181818" points="2196.5,514.9453,2206.5,518.9453,2196.5,522.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="853" x2="2202.5" y1="518.9453" y2="518.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1470.25" y="514.2031">call page controller</text><polygon fill="#181818" points="4170.5,544.2559,4180.5,548.2559,4170.5,552.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4176.5" y1="548.2559" y2="548.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="3124.5" y="543.5137">validate selected court</text><polygon fill="#181818" points="2219.5,573.5664,2209.5,577.5664,2219.5,581.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="4181.5" y1="577.5664" y2="577.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="3126.5" y="572.8242">selected court is valid</text><polygon fill="#181818" points="2936.5,602.877,2946.5,606.877,2936.5,610.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="606.877" y2="606.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="602.1348">request and build template</text><polygon fill="#181818" points="735.5,632.1875,725.5,636.1875,735.5,640.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="729.5" x2="2947.5" y1="636.1875" y2="636.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1801" y="631.4453">return html</text><polygon fill="#181818" points="66.5,661.498,56.5,665.498,66.5,669.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="723.5" y1="665.498" y2="665.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="353.5" y="660.7559">render html</text><path d="M20,680.498 L82,680.498 L82,687.8086 L72,697.8086 L20,697.8086 L20,680.498 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4230" x="20" y="680.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="694.0664">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="154" x="97" y="693.1328">[Selected court is not valid]</text><polygon fill="#181818" points="2219.5,715.1191,2209.5,719.1191,2219.5,723.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="4181.5" y1="719.1191" y2="719.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3150" y="714.377">error response</text><polygon fill="#181818" points="864,744.4297,854,748.4297,864,752.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="858" x2="2207.5" y1="748.4297" y2="748.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1485.25" y="743.6875">error response</text><polygon fill="#181818" points="66.5,773.7402,56.5,777.7402,66.5,781.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="852" y1="777.7402" y2="777.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="387.75" y="772.998">render error message</text><path d="M10,806.7402 L72,806.7402 L72,814.0508 L62,824.0508 L10,824.0508 L10,806.7402 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4367" x="10" y="806.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="820.3086">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="87" y="819.375">[Change attendance date]</text><polygon fill="#181818" points="2196.5,841.3613,2206.5,845.3613,2196.5,849.3613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724.5" x2="2202.5" y1="845.3613" y2="845.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1406" y="840.6191">call page controller</text><polygon fill="#181818" points="3326.5,870.6719,3336.5,874.6719,3326.5,878.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="3332.5" y1="874.6719" y2="874.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2689" y="869.9297">request and build template</text><polygon fill="#181818" points="1036.5,899.9824,1026.5,903.9824,1036.5,907.9824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="3337.5" y1="903.9824" y2="903.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2146.5" y="899.2402">return html</text><polygon fill="#181818" points="66.5,929.293,56.5,933.293,66.5,937.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="1024.5" y1="933.293" y2="933.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="504" y="928.5508">render html</text><polygon fill="#181818" points="1013.5,958.6035,1023.5,962.6035,1013.5,966.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="1019.5" y1="962.6035" y2="962.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="450" y="957.8613">select a new attendance date</text><polygon fill="#181818" points="2196.5,987.9141,2206.5,991.9141,2196.5,995.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025.5" x2="2202.5" y1="991.9141" y2="991.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1556.5" y="987.1719">call page controller</text><polygon fill="#181818" points="4291.5,1017.2246,4301.5,1021.2246,4291.5,1025.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4297.5" y1="1021.2246" y2="1021.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="3188" y="1016.4824">validate selected date</text><polygon fill="#181818" points="2219.5,1046.5352,2209.5,1050.5352,2219.5,1054.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="4302.5" y1="1050.5352" y2="1050.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="3190" y="1045.793">selected date is valid</text><polygon fill="#181818" points="2936.5,1075.8457,2946.5,1079.8457,2936.5,1083.8457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="1079.8457" y2="1079.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="1075.1035">request and build template</text><polygon fill="#181818" points="735.5,1105.1563,725.5,1109.1563,735.5,1113.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="729.5" x2="2947.5" y1="1109.1563" y2="1109.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1801" y="1104.4141">return html</text><polygon fill="#181818" points="66.5,1134.4668,56.5,1138.4668,66.5,1142.4668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="723.5" y1="1138.4668" y2="1138.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="353.5" y="1133.7246">render html</text><path d="M20,1153.4668 L82,1153.4668 L82,1160.7773 L72,1170.7773 L20,1170.7773 L20,1153.4668 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4347" x="20" y="1153.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1167.0352">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="148" x="97" y="1166.1016">[Selected date is not valid]</text><polygon fill="#181818" points="2219.5,1188.0879,2209.5,1192.0879,2219.5,1196.0879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="4302.5" y1="1192.0879" y2="1192.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3210.5" y="1187.3457">error response</text><polygon fill="#181818" points="1036.5,1217.3984,1026.5,1221.3984,1036.5,1225.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1030.5" x2="2207.5" y1="1221.3984" y2="1221.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1571.5" y="1216.6563">error response</text><polygon fill="#181818" points="66.5,1246.709,56.5,1250.709,66.5,1254.709" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="1024.5" y1="1250.709" y2="1250.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="474" y="1245.9668">render error message</text><path d="M10,1279.709 L72,1279.709 L72,1287.0195 L62,1297.0195 L10,1297.0195 L10,1279.709 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4487" x="10" y="1279.709"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1293.2773">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141" x="87" y="1292.3438">[Change attendance time]</text><polygon fill="#181818" points="2196.5,1314.3301,2206.5,1318.3301,2196.5,1322.3301" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724.5" x2="2202.5" y1="1318.3301" y2="1318.3301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1406" y="1313.5879">call page controller</text><polygon fill="#181818" points="3561.5,1343.6406,3571.5,1347.6406,3561.5,1351.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="3567.5" y1="1347.6406" y2="1347.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2806.5" y="1342.8984">request and build template</text><polygon fill="#181818" points="1253.5,1372.9512,1243.5,1376.9512,1253.5,1380.9512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1247.5" x2="3572.5" y1="1376.9512" y2="1376.9512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2372.5" y="1372.209">return html</text><polygon fill="#181818" points="66.5,1402.2617,56.5,1406.2617,66.5,1410.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="1241.5" y1="1406.2617" y2="1406.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="612.5" y="1401.5195">render html</text><polygon fill="#181818" points="1230.5,1431.5723,1240.5,1435.5723,1230.5,1439.5723" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="1236.5" y1="1435.5723" y2="1435.5723"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="558" y="1430.8301">select a new attendance time</text><polygon fill="#181818" points="2196.5,1460.8828,2206.5,1464.8828,2196.5,1468.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1242.5" x2="2202.5" y1="1464.8828" y2="1464.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1665" y="1460.1406">call page controller</text><polygon fill="#181818" points="4410,1490.1934,4420,1494.1934,4410,1498.1934" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4416" y1="1494.1934" y2="1494.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="3246.75" y="1489.4512">validate selected time</text><polygon fill="#181818" points="2219.5,1519.5039,2209.5,1523.5039,2219.5,1527.5039" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="4421" y1="1523.5039" y2="1523.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="3248.75" y="1518.7617">selected time is valid</text><polygon fill="#181818" points="2936.5,1548.8145,2946.5,1552.8145,2936.5,1556.8145" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="1552.8145" y2="1552.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="1548.0723">request and build template</text><polygon fill="#181818" points="735.5,1578.125,725.5,1582.125,735.5,1586.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="729.5" x2="2947.5" y1="1582.125" y2="1582.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1801" y="1577.3828">return html</text><polygon fill="#181818" points="66.5,1607.4355,56.5,1611.4355,66.5,1615.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="723.5" y1="1611.4355" y2="1611.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="353.5" y="1606.6934">render html</text><path d="M20,1626.4355 L82,1626.4355 L82,1633.7461 L72,1643.7461 L20,1643.7461 L20,1626.4355 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4467" x="20" y="1626.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1640.0039">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="150" x="97" y="1639.0703">[Selected time is not valid]</text><polygon fill="#181818" points="2219.5,1661.0566,2209.5,1665.0566,2219.5,1669.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="4421" y1="1665.0566" y2="1665.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3269.75" y="1660.3145">error response</text><polygon fill="#181818" points="1253.5,1690.3672,1243.5,1694.3672,1253.5,1698.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1247.5" x2="2207.5" y1="1694.3672" y2="1694.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1680" y="1689.625">error response</text><polygon fill="#181818" points="66.5,1719.6777,56.5,1723.6777,66.5,1727.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="1241.5" y1="1723.6777" y2="1723.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="582.5" y="1718.9355">render error message</text><path d="M10,1752.6777 L72,1752.6777 L72,1759.9883 L62,1769.9883 L10,1769.9883 L10,1752.6777 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4635" x="10" y="1752.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1766.2461">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="87" y="1765.3125">[Change deferrals]</text><polygon fill="#181818" points="2196.5,1787.2988,2206.5,1791.2988,2196.5,1795.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724.5" x2="2202.5" y1="1791.2988" y2="1791.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1406" y="1786.5566">call page controller</text><polygon fill="#181818" points="3780.5,1816.6094,3790.5,1820.6094,3780.5,1824.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="3786.5" y1="1820.6094" y2="1820.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2916" y="1815.8672">request and build template</text><polygon fill="#181818" points="1444,1845.9199,1434,1849.9199,1444,1853.9199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1438" x2="3791.5" y1="1849.9199" y2="1849.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2577.25" y="1845.1777">return html</text><polygon fill="#181818" points="66.5,1875.2305,56.5,1879.2305,66.5,1883.2305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="1432" y1="1879.2305" y2="1879.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="707.75" y="1874.4883">render html</text><polygon fill="#181818" points="1421,1904.541,1431,1908.541,1421,1912.541" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="1427" y1="1908.541" y2="1908.541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="664.25" y="1903.7988">enter number of deferrals</text><polygon fill="#181818" points="2196.5,1933.8516,2206.5,1937.8516,2196.5,1941.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1433" x2="2202.5" y1="1937.8516" y2="1937.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1760.25" y="1933.1094">call page controller</text><polygon fill="#181818" points="4544,1963.1621,4554,1967.1621,4544,1971.1621" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4550" y1="1967.1621" y2="1967.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="3313.75" y="1962.4199">validate selected time</text><polygon fill="#181818" points="2219.5,1992.4727,2209.5,1996.4727,2219.5,2000.4727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="4555" y1="1996.4727" y2="1996.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="3267.75" y="1991.7305">selected number of deferrals is valid</text><polygon fill="#181818" points="2936.5,2021.7832,2946.5,2025.7832,2936.5,2029.7832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="2025.7832" y2="2025.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="2021.041">request and build template</text><polygon fill="#181818" points="735.5,2051.0938,725.5,2055.0938,735.5,2059.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="729.5" x2="2947.5" y1="2055.0938" y2="2055.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1801" y="2050.3516">return html</text><polygon fill="#181818" points="66.5,2080.4043,56.5,2084.4043,66.5,2088.4043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="723.5" y1="2084.4043" y2="2084.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="353.5" y="2079.6621">render html</text><path d="M20,2099.4043 L82,2099.4043 L82,2106.7148 L72,2116.7148 L20,2116.7148 L20,2099.4043 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4615" x="20" y="2099.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="2112.9727">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="238" x="97" y="2112.0391">[Selected number of deferrals is not valid]</text><polygon fill="#181818" points="2219.5,2134.0254,2209.5,2138.0254,2219.5,2142.0254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="4555" y1="2138.0254" y2="2138.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3336.75" y="2133.2832">error response</text><polygon fill="#181818" points="1444,2163.3359,1434,2167.3359,1444,2171.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1438" x2="2207.5" y1="2167.3359" y2="2167.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1775.25" y="2162.5938">error response</text><polygon fill="#181818" points="66.5,2192.6465,56.5,2196.6465,66.5,2200.6465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="1432" y1="2196.6465" y2="2196.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="677.75" y="2191.9043">render error message</text><polygon fill="#181818" points="2196.5,2235.957,2206.5,2239.957,2196.5,2243.957" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724.5" x2="2202.5" y1="2239.957" y2="2239.957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1406" y="2235.2148">call page controller</text><polygon fill="#181818" points="3121,2265.2676,3131,2269.2676,3121,2273.2676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="3127" y1="2269.2676" y2="2269.2676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2586.25" y="2264.5254">request and build template</text><polygon fill="#181818" points="1594.5,2294.5781,1584.5,2298.5781,1594.5,2302.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1588.5" x2="3132" y1="2298.5781" y2="2298.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2322.75" y="2293.8359">return html</text><polygon fill="#181818" points="66.5,2323.8887,56.5,2327.8887,66.5,2331.8887" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="2207.5" y1="2327.8887" y2="2327.8887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1095.5" y="2323.1465">render html</text><path d="M10,2342.8887 L72,2342.8887 L72,2350.1992 L62,2360.1992 L10,2360.1992 L10,2342.8887 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="458.9688" style="stroke:#000000;stroke-width:1.5;" width="4806" x="10" y="2342.8887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="2356.457">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="87" y="2355.5234">[Change pool number]</text><polygon fill="#181818" points="2196.5,2377.5098,2206.5,2381.5098,2196.5,2385.5098" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1583.5" x2="2202.5" y1="2381.5098" y2="2381.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1835.5" y="2376.7676">call page controller</text><polygon fill="#181818" points="3995,2406.8203,4005,2410.8203,3995,2414.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4001" y1="2410.8203" y2="2410.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="3023.25" y="2406.0781">request and build template</text><polygon fill="#181818" points="1761,2436.1309,1751,2440.1309,1761,2444.1309" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1755" x2="4006" y1="2440.1309" y2="2440.1309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2843" y="2435.3887">return html</text><polygon fill="#181818" points="66.5,2465.4414,56.5,2469.4414,66.5,2473.4414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="1749" y1="2469.4414" y2="2469.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="866.25" y="2464.6992">render html</text><polygon fill="#181818" points="1738,2494.752,1748,2498.752,1738,2502.752" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="1744" y1="2498.752" y2="2498.752"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="824.75" y="2494.0098">enter a new pool number</text><polygon fill="#181818" points="2196.5,2524.0625,2206.5,2528.0625,2196.5,2532.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1750" x2="2202.5" y1="2528.0625" y2="2528.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1918.75" y="2523.3203">call page controller</text><polygon fill="#181818" points="4703.5,2553.373,4713.5,2557.373,4703.5,2561.373" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="4709.5" y1="2557.373" y2="2557.373"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="3393.5" y="2552.6309">validate selected time</text><polygon fill="#181818" points="2219.5,2582.6836,2209.5,2586.6836,2219.5,2590.6836" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="4714.5" y1="2586.6836" y2="2586.6836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="3397.5" y="2581.9414">pool number is valid</text><polygon fill="#181818" points="2936.5,2611.9941,2946.5,2615.9941,2936.5,2619.9941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2942.5" y1="2615.9941" y2="2615.9941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="2494" y="2611.252">request and build template</text><polygon fill="#181818" points="1594.5,2641.3047,1584.5,2645.3047,1594.5,2649.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1588.5" x2="2947.5" y1="2645.3047" y2="2645.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2230.5" y="2640.5625">return html</text><polygon fill="#181818" points="66.5,2670.6152,56.5,2674.6152,66.5,2678.6152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="1582.5" y1="2674.6152" y2="2674.6152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="783" y="2669.873">render html</text><path d="M20,2689.6152 L82,2689.6152 L82,2696.9258 L72,2706.9258 L20,2706.9258 L20,2689.6152 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="4786" x="20" y="2689.6152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="2703.1836">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="97" y="2702.25">[Selected pool number is not valid]</text><polygon fill="#181818" points="2219.5,2724.2363,2209.5,2728.2363,2219.5,2732.2363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="4714.5" y1="2728.2363" y2="2728.2363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3416.5" y="2723.4941">error response</text><polygon fill="#181818" points="1761,2753.5469,1751,2757.5469,1761,2761.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1755" x2="2207.5" y1="2757.5469" y2="2757.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1933.75" y="2752.8047">error response</text><polygon fill="#181818" points="66.5,2782.8574,56.5,2786.8574,66.5,2790.8574" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="1749" y1="2786.8574" y2="2786.8574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="836.25" y="2782.1152">render error message</text><polygon fill="#181818" points="2196.5,2826.168,2206.5,2830.168,2196.5,2834.168" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1583.5" x2="2202.5" y1="2830.168" y2="2830.168"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1835.5" y="2825.4258">call page controller</text><polygon fill="#181818" points="2568.5,2855.4785,2578.5,2859.4785,2568.5,2863.4785" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2208.5" x2="2574.5" y1="2859.4785" y2="2859.4785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="2337.5" y="2854.7363">call requestObject</text><polygon fill="#181818" points="4864.5,2884.7891,4874.5,2888.7891,4864.5,2892.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2580.5" x2="4870.5" y1="2888.7891" y2="2888.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="3699" y="2884.0469">post data</text><polygon fill="#181818" points="2219.5,2914.0996,2209.5,2918.0996,2219.5,2922.0996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2213.5" x2="2579.5" y1="2918.0996" y2="2918.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="2326" y="2913.3574">resolve requestObject</text><polygon fill="#181818" points="184,2928.0996,174,2932.0996,184,2936.0996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="178" x2="2207.5" y1="2932.0996" y2="2932.0996"/><polygon fill="#181818" points="1962.5,2957.4102,1972.5,2961.4102,1962.5,2965.4102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="173" x2="1968.5" y1="2961.4102" y2="2961.4102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1013.25" y="2956.668">call page controller</text><polygon fill="#181818" points="5043.5,2986.7207,5053.5,2990.7207,5043.5,2994.7207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1974.5" x2="5049.5" y1="2990.7207" y2="2990.7207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="3430.5" y="2985.9785">request and build template</text><polygon fill="#181818" points="184,3016.0313,174,3020.0313,184,3024.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="178" x2="5054.5" y1="3020.0313" y2="3020.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2578.75" y="3015.2891">return html</text><polygon fill="#181818" points="66.5,3045.3418,56.5,3049.3418,66.5,3053.3418" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="172" y1="3049.3418" y2="3049.3418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="77.75" y="3044.5996">render html</text><path d="M20,3064.3418 L82,3064.3418 L82,3071.6523 L72,3081.6523 L20,3081.6523 L20,3064.3418 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="4937" x="20" y="3064.3418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="3077.9102">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147" x="97" y="3076.9766">[Backend returns an error]</text><polygon fill="#181818" points="2591.5,3098.9629,2581.5,3102.9629,2591.5,3106.9629" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2585.5" x2="4875.5" y1="3102.9629" y2="3102.9629"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3683" y="3098.2207">error response</text><polygon fill="#181818" points="2219.5,3128.2734,2209.5,3132.2734,2219.5,3136.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2213.5" x2="2579.5" y1="3132.2734" y2="3132.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="2331" y="3127.5313">reject requestObject</text><polygon fill="#181818" points="1594.5,3157.584,1584.5,3161.584,1594.5,3165.584" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1588.5" x2="2207.5" y1="3161.584" y2="3161.584"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1850.5" y="3156.8418">error response</text><polygon fill="#181818" points="66.5,3186.8945,56.5,3190.8945,66.5,3194.8945" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="1582.5" y1="3190.8945" y2="3190.8945"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="753" y="3186.1523">render error message</text><!--MD5=[957abfb4bf20a41ea53ad5fc651ec4a8]
@startuml sequence-general

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

''' LOCAL ROUTING
participant PoolManagement <</pool-management>>
participant Page <</pool-management/request-pool>>
participant "Step 1" <</select-court>>
participant "Step 2" <</pool-details>>
participant "Step 2.1" <</select-court>>
participant "Step 2.2" <</change-attendance-date>>
participant "Step 2.3" <</change-attendance-time>>
participant "Step 2.4" <</change-deferrals>>
participant "Step 3" <</check-details>>
participant "Step 3.1" <</change-pool-number>>

''' CONTROLLER AND REQUEST OBJECTS
participant PoolManagementController <<pool-management.controller.js>>
participant RequestPoolController <<request-pool.controller.js>>
participant MatchCourtObject <<matchUserCourt()>>
participant CreatePoolRequestObj <<createPoolRequest.post()>>
' participant PageTemplate <<pool-management/index.njk>>

''' TEMPLATES
participant SelectCourtTemplate <<select-court.njk>>
participant PoolDetailsTemplate <<pool-details/index.njk>>
participant CheckDetailsTemplate <<check-details.njk>>
participant ChangeDateTemplate <<change-attendance-date.njk>>
participant ChangeTimeTemplate <<change-attendance-time.njk>>
participant ChangeDeferralsTemplate <<change-deferrals.njk>>
participant ChangePoolNumberTemplate <<change-pool-number.njk>>

''' FILTERS AND VALIDATORS
participant CourtValidator
participant DateValidator
participant TimeValidator
participant DeferralsValidator
participant PoolNumberValidator

''' BACKEND CONTROLLER
participant BackendController



''' JOURNEY FLOW
Actor -> Page : request page

' Page -> PageValidator : validate request
' Page <- PageValidator : return status

Page -> RequestPoolController : call page controller
RequestPoolController -> SelectCourtTemplate : request and build template
"Step 1" <- SelectCourtTemplate : return html
Actor <- "Step 1" : render html

"Step 1" -> RequestPoolController : call page controller
RequestPoolController -> PoolDetailsTemplate : request and build template
"Step 2" <- PoolDetailsTemplate : return html
Actor <- "Step 2" : render html

alt Change court location
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> SelectCourtTemplate : request and build template
  "Step 2.1" <- SelectCourtTemplate : return html
  Actor <- "Step 2.1" : render html
  Actor -> "Step 2.1" : select a new court
  "Step 2.1" -> RequestPoolController : call page controller
  RequestPoolController -> CourtValidator : validate selected court
  RequestPoolController <- CourtValidator : selected court is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected court is not valid
    RequestPoolController <- - CourtValidator : error response
    "Step 2.1" <- - RequestPoolController : error response
    Actor <- - "Step 2.1" : render error message
  end
end

alt Change attendance date
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeDateTemplate : request and build template
  "Step 2.2" <- ChangeDateTemplate : return html
  Actor <- "Step 2.2" : render html
  Actor -> "Step 2.2" : select a new attendance date
  "Step 2.2" -> RequestPoolController : call page controller
  RequestPoolController -> DateValidator : validate selected date
  RequestPoolController <- DateValidator : selected date is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected date is not valid
    RequestPoolController <- - DateValidator : error response
    "Step 2.2" <- - RequestPoolController : error response
    Actor <- - "Step 2.2" : render error message
  end
end

alt Change attendance time
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeTimeTemplate : request and build template
  "Step 2.3" <- ChangeTimeTemplate : return html
  Actor <- "Step 2.3" : render html
  Actor -> "Step 2.3" : select a new attendance time
  "Step 2.3" -> RequestPoolController : call page controller
  RequestPoolController -> TimeValidator : validate selected time
  RequestPoolController <- TimeValidator : selected time is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected time is not valid
    RequestPoolController <- - TimeValidator : error response
    "Step 2.3" <- - RequestPoolController : error response
    Actor <- - "Step 2.3" : render error message
  end
end

alt Change deferrals
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeDeferralsTemplate : request and build template
  "Step 2.4" <- ChangeDeferralsTemplate : return html
  Actor <- "Step 2.4" : render html
  Actor -> "Step 2.4" : enter number of deferrals
  "Step 2.4" -> RequestPoolController : call page controller
  RequestPoolController -> DeferralsValidator : validate selected time
  RequestPoolController <- DeferralsValidator : selected number of deferrals is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected number of deferrals is not valid
    RequestPoolController <- - DeferralsValidator : error response
    "Step 2.4" <- - RequestPoolController : error response
    Actor <- - "Step 2.4" : render error message
  end
end

"Step 2" -> RequestPoolController : call page controller
RequestPoolController -> CheckDetailsTemplate : request and build template
"Step 3" <- CheckDetailsTemplate : return html
Actor <- RequestPoolController : render html

alt Change pool number
  "Step 3" -> RequestPoolController : call page controller
  RequestPoolController -> ChangePoolNumberTemplate : request and build template
  "Step 3.1" <- ChangePoolNumberTemplate : return html
  Actor <- "Step 3.1" : render html
  Actor -> "Step 3.1" : enter a new pool number
  "Step 3.1" -> RequestPoolController : call page controller
  RequestPoolController -> PoolNumberValidator : validate selected time
  RequestPoolController <- PoolNumberValidator : pool number is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 3" <- PoolDetailsTemplate : return html
  Actor <- "Step 3" : render html

  alt Selected pool number is not valid
    RequestPoolController <- - PoolNumberValidator : error response
    "Step 3.1" <- - RequestPoolController : error response
    Actor <- - "Step 3.1" : render error message
  end
end

"Step 3" -> RequestPoolController : call page controller
RequestPoolController -> CreatePoolRequestObj : call requestObject
CreatePoolRequestObj -> BackendController : post data

RequestPoolController <- CreatePoolRequestObj : resolve requestObject
PoolManagement <- RequestPoolController
PoolManagement -> PoolManagementController : call page controller
PoolManagementController -> "PoolManagementTemplate" : request and build template
PoolManagement <- "PoolManagementTemplate" : return html
Actor <- PoolManagement : render html

alt Backend returns an error
  CreatePoolRequestObj <- - BackendController : error response
  RequestPoolController <- - CreatePoolRequestObj : reject requestObject
  "Step 3" <- - RequestPoolController : error response
  Actor <- - "Step 3" : render error message
end

@enduml

@startuml sequence-general

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

participant PoolManagement <</pool-management>>
participant Page <</pool-management/request-pool>>
participant "Step 1" <</select-court>>
participant "Step 2" <</pool-details>>
participant "Step 2.1" <</select-court>>
participant "Step 2.2" <</change-attendance-date>>
participant "Step 2.3" <</change-attendance-time>>
participant "Step 2.4" <</change-deferrals>>
participant "Step 3" <</check-details>>
participant "Step 3.1" <</change-pool-number>>

participant PoolManagementController <<pool-management.controller.js>>
participant RequestPoolController <<request-pool.controller.js>>
participant MatchCourtObject <<matchUserCourt()>>
participant CreatePoolRequestObj <<createPoolRequest.post()>>

participant SelectCourtTemplate <<select-court.njk>>
participant PoolDetailsTemplate <<pool-details/index.njk>>
participant CheckDetailsTemplate <<check-details.njk>>
participant ChangeDateTemplate <<change-attendance-date.njk>>
participant ChangeTimeTemplate <<change-attendance-time.njk>>
participant ChangeDeferralsTemplate <<change-deferrals.njk>>
participant ChangePoolNumberTemplate <<change-pool-number.njk>>

participant CourtValidator
participant DateValidator
participant TimeValidator
participant DeferralsValidator
participant PoolNumberValidator

participant BackendController



Actor -> Page : request page


Page -> RequestPoolController : call page controller
RequestPoolController -> SelectCourtTemplate : request and build template
"Step 1" <- SelectCourtTemplate : return html
Actor <- "Step 1" : render html

"Step 1" -> RequestPoolController : call page controller
RequestPoolController -> PoolDetailsTemplate : request and build template
"Step 2" <- PoolDetailsTemplate : return html
Actor <- "Step 2" : render html

alt Change court location
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> SelectCourtTemplate : request and build template
  "Step 2.1" <- SelectCourtTemplate : return html
  Actor <- "Step 2.1" : render html
  Actor -> "Step 2.1" : select a new court
  "Step 2.1" -> RequestPoolController : call page controller
  RequestPoolController -> CourtValidator : validate selected court
  RequestPoolController <- CourtValidator : selected court is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected court is not valid
    RequestPoolController <- - CourtValidator : error response
    "Step 2.1" <- - RequestPoolController : error response
    Actor <- - "Step 2.1" : render error message
  end
end

alt Change attendance date
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeDateTemplate : request and build template
  "Step 2.2" <- ChangeDateTemplate : return html
  Actor <- "Step 2.2" : render html
  Actor -> "Step 2.2" : select a new attendance date
  "Step 2.2" -> RequestPoolController : call page controller
  RequestPoolController -> DateValidator : validate selected date
  RequestPoolController <- DateValidator : selected date is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected date is not valid
    RequestPoolController <- - DateValidator : error response
    "Step 2.2" <- - RequestPoolController : error response
    Actor <- - "Step 2.2" : render error message
  end
end

alt Change attendance time
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeTimeTemplate : request and build template
  "Step 2.3" <- ChangeTimeTemplate : return html
  Actor <- "Step 2.3" : render html
  Actor -> "Step 2.3" : select a new attendance time
  "Step 2.3" -> RequestPoolController : call page controller
  RequestPoolController -> TimeValidator : validate selected time
  RequestPoolController <- TimeValidator : selected time is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected time is not valid
    RequestPoolController <- - TimeValidator : error response
    "Step 2.3" <- - RequestPoolController : error response
    Actor <- - "Step 2.3" : render error message
  end
end

alt Change deferrals
  "Step 2" -> RequestPoolController : call page controller
  RequestPoolController -> ChangeDeferralsTemplate : request and build template
  "Step 2.4" <- ChangeDeferralsTemplate : return html
  Actor <- "Step 2.4" : render html
  Actor -> "Step 2.4" : enter number of deferrals
  "Step 2.4" -> RequestPoolController : call page controller
  RequestPoolController -> DeferralsValidator : validate selected time
  RequestPoolController <- DeferralsValidator : selected number of deferrals is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 2" <- PoolDetailsTemplate : return html
  Actor <- "Step 2" : render html

  alt Selected number of deferrals is not valid
    RequestPoolController <- - DeferralsValidator : error response
    "Step 2.4" <- - RequestPoolController : error response
    Actor <- - "Step 2.4" : render error message
  end
end

"Step 2" -> RequestPoolController : call page controller
RequestPoolController -> CheckDetailsTemplate : request and build template
"Step 3" <- CheckDetailsTemplate : return html
Actor <- RequestPoolController : render html

alt Change pool number
  "Step 3" -> RequestPoolController : call page controller
  RequestPoolController -> ChangePoolNumberTemplate : request and build template
  "Step 3.1" <- ChangePoolNumberTemplate : return html
  Actor <- "Step 3.1" : render html
  Actor -> "Step 3.1" : enter a new pool number
  "Step 3.1" -> RequestPoolController : call page controller
  RequestPoolController -> PoolNumberValidator : validate selected time
  RequestPoolController <- PoolNumberValidator : pool number is valid
  RequestPoolController -> PoolDetailsTemplate : request and build template
  "Step 3" <- PoolDetailsTemplate : return html
  Actor <- "Step 3" : render html

  alt Selected pool number is not valid
    RequestPoolController <- - PoolNumberValidator : error response
    "Step 3.1" <- - RequestPoolController : error response
    Actor <- - "Step 3.1" : render error message
  end
end

"Step 3" -> RequestPoolController : call page controller
RequestPoolController -> CreatePoolRequestObj : call requestObject
CreatePoolRequestObj -> BackendController : post data

RequestPoolController <- CreatePoolRequestObj : resolve requestObject
PoolManagement <- RequestPoolController
PoolManagement -> PoolManagementController : call page controller
PoolManagementController -> "PoolManagementTemplate" : request and build template
PoolManagement <- "PoolManagementTemplate" : return html
Actor <- PoolManagement : render html

alt Backend returns an error
  CreatePoolRequestObj <- - BackendController : error response
  RequestPoolController <- - CreatePoolRequestObj : reject requestObject
  "Step 3" <- - RequestPoolController : error response
  Actor <- - "Step 3" : render error message
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>