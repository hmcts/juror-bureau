<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1319px" preserveAspectRatio="none" style="width:3856px;height:1319px;background:#FFFFFF;" version="1.1" viewBox="0 0 3856 1319" width="3856px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="355.7266" style="stroke:#000000;stroke-width:1.5;" width="3390.5" x="10" y="275.1504"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="3370.5" x="20" y="475.3242"/><rect fill="none" height="355.7266" style="stroke:#000000;stroke-width:1.5;" width="3643.5" x="10" y="644.877"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="3623.5" x="20" y="845.0508"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="3830.5" x="20" y="1190.4668"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="160.5" x2="160.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="326.5" x2="326.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="518.5" x2="518.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="721.5" x2="721.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="961.5" x2="961.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1201.5" x2="1201.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1402.5" x2="1402.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1597.5" x2="1597.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1782.5" x2="1782.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1979.5" x2="1979.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2183.5" x2="2183.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2377.5" x2="2377.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2559.5" x2="2559.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2735.5" x2="2735.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2929.5" x2="2929.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3100.5" x2="3100.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3280.5" x2="3280.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3511.5" x2="3511.5" y1="52.9766" y2="1312.709"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3741.5" x2="3741.5" y1="52.9766" y2="1312.709"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="30" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="37" y="42.0234">Actor</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="93.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="120" x="100.5" y="25.5352">«/pool-overview»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="114.5" y="42.0234">PoolOverview</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="237.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="165" x="244.5" y="25.5352">«/additional-summons»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="257.5" y="42.0234">AdditionalSummons</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="426.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="140" x="448.5" y="25.5352">«/change-deferrals»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="433.5" y="42.0234">ChangeDeferralsAmount</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="620.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="188" x="627.5" y="25.5352">«/change-catchment-area»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="642" y="42.0234">ChangeCatchmentArea</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="258" x="832.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="244" x="839.5" y="25.5352">«additional-summons.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="857" y="42.0234">AdditionalSummonsController</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="203" x="1100.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="189" x="1107.5" y="25.5352">«poolSummaryObject.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1133" y="42.0234">PoolSummaryObject</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178" x="1313.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="164" x="1320.5" y="25.5352">«postcodesObject.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="1346" y="42.0234">PostcodesObject</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="1501.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="158" x="1519" y="25.5352">«change-deferrals.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="1508.5" y="42.0234">ChangeDeferralsTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="1704.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="122" x="1722" y="25.5352">«select-court.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1711.5" y="42.0234">SelectCourtTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="1871.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="183" x="1888.5" y="25.5352">«additional-summons.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="1878.5" y="42.0234">AdditionalSummonsTemplate</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="2098.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="138" x="2114.5" y="25.5352">«pool-overview.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="2105.5" y="42.0234">PoolOverviewTemplate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="2278.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="2285.5" y="42.0234">SummonsAmountValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="2487.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="2494.5" y="42.0234">PostcodesValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="2642.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="2649.5" y="42.0234">DeferralAmountValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="2838.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="2845.5" y="42.0234">CatchmentAreaValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="3030.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="3037.5" y="42.0234">BackendController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="3181.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="3188.5" y="42.0234">ChangeDeferralsController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243" x="3390.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229" x="3397.5" y="42.0234">ChangeCatchmentAreaController</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="3643.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="3650.5" y="42.0234">AdditionalSummonsObject</text><polygon fill="#181818" points="148.5,80.2871,158.5,84.2871,148.5,88.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="55.5" x2="154.5" y1="84.2871" y2="84.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="67.5" y="79.5449">request page</text><polygon fill="#181818" points="949.5,109.5977,959.5,113.5977,949.5,117.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="160.5" x2="955.5" y1="113.5977" y2="113.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="451" y="108.8555">call additional summons controller</text><polygon fill="#181818" points="3089,138.9082,3099,142.9082,3089,146.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="3095" y1="142.9082" y2="142.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="334" x="1864.25" y="138.166">fetch pool-summary, postcodes &amp; deferrals available</text><polygon fill="#181818" points="972.5,168.2188,962.5,172.2188,972.5,176.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="3100" y1="172.2188" y2="172.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1991.75" y="167.4766">response OK</text><polygon fill="#181818" points="1968,197.5293,1978,201.5293,1968,205.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="1974" y1="201.5293" y2="201.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1386.25" y="196.7871">request and build template</text><polygon fill="#181818" points="972.5,226.8398,962.5,230.8398,972.5,234.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="1979" y1="230.8398" y2="230.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1435.25" y="226.0977">return html</text><polygon fill="#181818" points="66.5,256.1504,56.5,260.1504,66.5,264.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="260.1504" y2="260.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="255.4082">render html</text><path d="M10,275.1504 L72,275.1504 L72,282.4609 L62,292.4609 L10,292.4609 L10,275.1504 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="355.7266" style="stroke:#000000;stroke-width:1.5;" width="3390.5" x="10" y="275.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="288.7188">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="209" x="87" y="287.7852">[Change deferrals to include amount]</text><polygon fill="#181818" points="949.5,309.7715,959.5,313.7715,949.5,317.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="327" x2="955.5" y1="313.7715" y2="313.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="534.25" y="309.0293">call additional summons controller</text><polygon fill="#181818" points="1586,339.082,1596,343.082,1586,347.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="1592" y1="343.082" y2="343.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1195.25" y="338.3398">request and build template</text><polygon fill="#181818" points="972.5,368.3926,962.5,372.3926,972.5,376.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="1597" y1="372.3926" y2="372.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1244.25" y="367.6504">return html</text><polygon fill="#181818" points="66.5,397.7031,56.5,401.7031,66.5,405.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="401.7031" y2="401.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="396.9609">render html</text><polygon fill="#181818" points="3269,427.0137,3279,431.0137,3269,435.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="518.5" x2="3275" y1="431.0137" y2="431.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="1819.25" y="426.2715">post new deferral amount</text><polygon fill="#181818" points="2746.5,456.3242,2736.5,460.3242,2746.5,464.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2740.5" x2="3280" y1="460.3242" y2="460.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="2905.25" y="455.582">validate the new deferral amount</text><path d="M20,475.3242 L82,475.3242 L82,482.6348 L72,492.6348 L20,492.6348 L20,475.3242 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="3370.5" x="20" y="475.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="488.8926">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="97" y="487.959">[Invalid amount of deferrals]</text><polygon fill="#181818" points="3269,509.9453,3279,513.9453,3269,517.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2735.5" x2="3275" y1="513.9453" y2="513.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="2961.25" y="509.2031">invalid amount</text><polygon fill="#181818" points="66.5,539.2559,56.5,543.2559,66.5,547.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="3280" y1="543.2559" y2="543.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1601.75" y="538.5137">render error message</text><polygon fill="#181818" points="3269,575.5664,3279,579.5664,3269,583.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2735.5" x2="3275" y1="579.5664" y2="579.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="2967.25" y="574.8242">valid amount</text><polygon fill="#181818" points="972.5,589.5664,962.5,593.5664,972.5,597.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="3280" y1="593.5664" y2="593.5664"/><polygon fill="#181818" points="66.5,618.877,56.5,622.877,66.5,626.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="622.877" y2="622.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="618.1348">render html</text><path d="M10,644.877 L72,644.877 L72,652.1875 L62,662.1875 L10,662.1875 L10,644.877 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="355.7266" style="stroke:#000000;stroke-width:1.5;" width="3643.5" x="10" y="644.877"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="658.4453">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158" x="87" y="657.5117">[Change the catchment area]</text><polygon fill="#181818" points="949.5,679.498,959.5,683.498,949.5,687.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="327" x2="955.5" y1="683.498" y2="683.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="534.25" y="678.7559">call additional summons controller</text><polygon fill="#181818" points="1771,708.8086,1781,712.8086,1771,716.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="1777" y1="712.8086" y2="712.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1287.75" y="708.0664">request and build template</text><polygon fill="#181818" points="972.5,738.1191,962.5,742.1191,972.5,746.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="1782" y1="742.1191" y2="742.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1336.75" y="737.377">return html</text><polygon fill="#181818" points="66.5,767.4297,56.5,771.4297,66.5,775.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="771.4297" y2="771.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="766.6875">render html</text><polygon fill="#181818" points="3500,796.7402,3510,800.7402,3500,804.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="721.5" x2="3506" y1="800.7402" y2="800.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="2038.25" y="795.998">post new catchment area</text><polygon fill="#181818" points="2940.5,826.0508,2930.5,830.0508,2940.5,834.0508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2934.5" x2="3511" y1="830.0508" y2="830.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="3119.75" y="825.3086">validate the new catchment area</text><path d="M20,845.0508 L82,845.0508 L82,852.3613 L72,862.3613 L20,862.3613 L20,845.0508 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="3623.5" x="20" y="845.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="858.6191">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="135" x="97" y="857.6855">[Invalid catchment area]</text><polygon fill="#181818" points="3500,879.6719,3510,883.6719,3500,887.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2929.5" x2="3506" y1="883.6719" y2="883.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="3149.75" y="878.9297">invalid catchment area</text><polygon fill="#181818" points="66.5,908.9824,56.5,912.9824,66.5,916.9824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="3511" y1="912.9824" y2="912.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1717.25" y="908.2402">render error message</text><polygon fill="#181818" points="3500,945.293,3510,949.293,3500,953.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2929.5" x2="3506" y1="949.293" y2="949.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="3179.75" y="944.5508">valid amount</text><polygon fill="#181818" points="972.5,959.293,962.5,963.293,972.5,967.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="3511" y1="963.293" y2="963.293"/><polygon fill="#181818" points="66.5,988.6035,56.5,992.6035,66.5,996.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="992.6035" y2="992.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="987.8613">render html</text><polygon fill="#181818" points="949.5,1024.9141,959.5,1028.9141,949.5,1032.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="327" x2="955.5" y1="1028.9141" y2="1028.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="546.75" y="1024.1719">post additional summons form</text><polygon fill="#181818" points="3089,1054.2246,3099,1058.2246,3089,1062.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="3095" y1="1058.2246" y2="1058.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="1888.75" y="1053.4824">post selected postcodes and citizens amount</text><polygon fill="#181818" points="972.5,1083.5352,962.5,1087.5352,972.5,1091.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="3100" y1="1087.5352" y2="1087.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1991.75" y="1082.793">response OK</text><polygon fill="#181818" points="2171.5,1112.8457,2181.5,1116.8457,2171.5,1120.8457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="2177.5" y1="1116.8457" y2="1116.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1488" y="1112.1035">request and build template</text><polygon fill="#181818" points="972.5,1142.1563,962.5,1146.1563,972.5,1150.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="966.5" x2="2182.5" y1="1146.1563" y2="1146.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1537" y="1141.4141">return html</text><polygon fill="#181818" points="66.5,1171.4668,56.5,1175.4668,66.5,1179.4668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60.5" x2="960.5" y1="1175.4668" y2="1175.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="472" y="1170.7246">render html</text><path d="M20,1190.4668 L82,1190.4668 L82,1197.7773 L72,1207.7773 L20,1207.7773 L20,1190.4668 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="3830.5" x="20" y="1190.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="1204.0352">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147" x="97" y="1203.1016">[Backend returns an error]</text><polygon fill="#181818" points="3730,1225.0879,3740,1229.0879,3730,1233.0879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3101" x2="3736" y1="1229.0879" y2="1229.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3376" y="1224.3457">error response</text><polygon fill="#181818" points="972.5,1254.3984,962.5,1258.3984,972.5,1262.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="966.5" x2="3741" y1="1258.3984" y2="1258.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="2288.25" y="1253.6563">reject requestObject</text><polygon fill="#181818" points="66.5,1283.709,56.5,1287.709,66.5,1291.709" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="60.5" x2="960.5" y1="1287.709" y2="1287.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="442" y="1282.9668">render error message</text><!--MD5=[041a7b0145b8fb1465f9660e9e334de9]
@startuml additional-summons

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

''' LOCAL ROUTING
participant PoolOverview <</pool-overview>>
participant AdditionalSummons <</additional-summons>>
participant ChangeDeferralsAmount <</change-deferrals>>
participant ChangeCatchmentArea <</change-catchment-area>>

''' CONTROLLER AND REQUEST OBJECTS
participant AdditionalSummonsController <<additional-summons.controller.js>>
participant PoolSummaryObject <<poolSummaryObject.get()>>
participant PostcodesObject <<postcodesObject.get()>>

''' TEMPLATES
participant ChangeDeferralsTemplate <<change-deferrals.njk>>
participant SelectCourtTemplate <<select-court.njk>>
participant AdditionalSummonsTemplate <<additional-summons.njk>>
participant PoolOverviewTemplate <<pool-overview.njk>>

''' FILTERS AND VALIDATORS
participant SummonsAmountValidator
participant PostcodesValidator
participant DeferralAmountValidator
participant CatchmentAreaValidator

''' BACKEND CONTROLLER
participant BackendController



''' JOURNEY FLOW
Actor -> PoolOverview : request page

PoolOverview -> AdditionalSummonsController : call additional summons controller

AdditionalSummonsController -> BackendController : fetch pool-summary, postcodes & deferrals available
AdditionalSummonsController <- BackendController : response OK

AdditionalSummonsController -> AdditionalSummonsTemplate : request and build template
AdditionalSummonsController <- AdditionalSummonsTemplate : return html
Actor <- AdditionalSummonsController : render html


alt Change deferrals to include amount
  AdditionalSummons -> AdditionalSummonsController : call additional summons controller
  AdditionalSummonsController -> ChangeDeferralsTemplate : request and build template
  AdditionalSummonsController <- ChangeDeferralsTemplate : return html
  Actor <- AdditionalSummonsController : render html
  ChangeDeferralsAmount -> ChangeDeferralsController : post new deferral amount
  ChangeDeferralsController -> DeferralAmountValidator : validate the new deferral amount

  alt Invalid amount of deferrals
    ChangeDeferralsController <- - DeferralAmountValidator : invalid amount
    Actor <- - ChangeDeferralsController : render error message
  end

  ChangeDeferralsController <- DeferralAmountValidator : valid amount
  AdditionalSummonsController <- ChangeDeferralsController
  Actor <- AdditionalSummonsController : render html
end

alt Change the catchment area
  AdditionalSummons -> AdditionalSummonsController : call additional summons controller
  AdditionalSummonsController -> SelectCourtTemplate : request and build template
  AdditionalSummonsController <- SelectCourtTemplate : return html
  Actor <- AdditionalSummonsController : render html
  ChangeCatchmentArea -> ChangeCatchmentAreaController : post new catchment area
  ChangeCatchmentAreaController -> CatchmentAreaValidator : validate the new catchment area

  alt Invalid catchment area
    ChangeCatchmentAreaController <- - CatchmentAreaValidator : invalid catchment area
    Actor <- - ChangeCatchmentAreaController : render error message
  end

  ChangeCatchmentAreaController <- CatchmentAreaValidator : valid amount
  AdditionalSummonsController <- ChangeCatchmentAreaController
  Actor <- AdditionalSummonsController : render html
end


AdditionalSummons -> AdditionalSummonsController : post additional summons form

AdditionalSummonsController -> BackendController : post selected postcodes and citizens amount
AdditionalSummonsController <- BackendController : response OK

AdditionalSummonsController -> PoolOverviewTemplate : request and build template
AdditionalSummonsController <- PoolOverviewTemplate : return html
Actor <- AdditionalSummonsController : render html

alt Backend returns an error
  AdditionalSummonsObject <- - BackendController : error response
  AdditionalSummonsController <- - AdditionalSummonsObject : reject requestObject
  Actor <- - AdditionalSummonsController : render error message
end

@enduml

@startuml additional-summons

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

participant PoolOverview <</pool-overview>>
participant AdditionalSummons <</additional-summons>>
participant ChangeDeferralsAmount <</change-deferrals>>
participant ChangeCatchmentArea <</change-catchment-area>>

participant AdditionalSummonsController <<additional-summons.controller.js>>
participant PoolSummaryObject <<poolSummaryObject.get()>>
participant PostcodesObject <<postcodesObject.get()>>

participant ChangeDeferralsTemplate <<change-deferrals.njk>>
participant SelectCourtTemplate <<select-court.njk>>
participant AdditionalSummonsTemplate <<additional-summons.njk>>
participant PoolOverviewTemplate <<pool-overview.njk>>

participant SummonsAmountValidator
participant PostcodesValidator
participant DeferralAmountValidator
participant CatchmentAreaValidator

participant BackendController



Actor -> PoolOverview : request page

PoolOverview -> AdditionalSummonsController : call additional summons controller

AdditionalSummonsController -> BackendController : fetch pool-summary, postcodes & deferrals available
AdditionalSummonsController <- BackendController : response OK

AdditionalSummonsController -> AdditionalSummonsTemplate : request and build template
AdditionalSummonsController <- AdditionalSummonsTemplate : return html
Actor <- AdditionalSummonsController : render html


alt Change deferrals to include amount
  AdditionalSummons -> AdditionalSummonsController : call additional summons controller
  AdditionalSummonsController -> ChangeDeferralsTemplate : request and build template
  AdditionalSummonsController <- ChangeDeferralsTemplate : return html
  Actor <- AdditionalSummonsController : render html
  ChangeDeferralsAmount -> ChangeDeferralsController : post new deferral amount
  ChangeDeferralsController -> DeferralAmountValidator : validate the new deferral amount

  alt Invalid amount of deferrals
    ChangeDeferralsController <- - DeferralAmountValidator : invalid amount
    Actor <- - ChangeDeferralsController : render error message
  end

  ChangeDeferralsController <- DeferralAmountValidator : valid amount
  AdditionalSummonsController <- ChangeDeferralsController
  Actor <- AdditionalSummonsController : render html
end

alt Change the catchment area
  AdditionalSummons -> AdditionalSummonsController : call additional summons controller
  AdditionalSummonsController -> SelectCourtTemplate : request and build template
  AdditionalSummonsController <- SelectCourtTemplate : return html
  Actor <- AdditionalSummonsController : render html
  ChangeCatchmentArea -> ChangeCatchmentAreaController : post new catchment area
  ChangeCatchmentAreaController -> CatchmentAreaValidator : validate the new catchment area

  alt Invalid catchment area
    ChangeCatchmentAreaController <- - CatchmentAreaValidator : invalid catchment area
    Actor <- - ChangeCatchmentAreaController : render error message
  end

  ChangeCatchmentAreaController <- CatchmentAreaValidator : valid amount
  AdditionalSummonsController <- ChangeCatchmentAreaController
  Actor <- AdditionalSummonsController : render html
end


AdditionalSummons -> AdditionalSummonsController : post additional summons form

AdditionalSummonsController -> BackendController : post selected postcodes and citizens amount
AdditionalSummonsController <- BackendController : response OK

AdditionalSummonsController -> PoolOverviewTemplate : request and build template
AdditionalSummonsController <- PoolOverviewTemplate : return html
Actor <- AdditionalSummonsController : render html

alt Backend returns an error
  AdditionalSummonsObject <- - BackendController : error response
  AdditionalSummonsController <- - AdditionalSummonsObject : reject requestObject
  Actor <- - AdditionalSummonsController : render error message
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>