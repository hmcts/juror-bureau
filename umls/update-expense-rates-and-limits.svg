<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1907px" preserveAspectRatio="none" style="width:2196px;height:1907px;background:#FFFFFF;" version="1.1" viewBox="0 0 2196 1907" width="2196px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="245.8398"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2029.5" x="10" y="658.1875"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="982.6035"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="1675.5" x="10" y="1189.7773"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="1455.5723"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="352" x2="352" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="552" x2="552" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="737" x2="737" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="997.5" x2="997.5" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1269.5" x2="1269.5" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1543.5" x2="1543.5" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1765.5" x2="1765.5" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1942.5" x2="1942.5" y1="52.9766" y2="1900.2305"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2109.5" x2="2109.5" y1="52.9766" y2="1900.2305"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="20" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="27" y="42.0234">Actor</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="230" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="231" x="237" y="25.5352">«/administration/expense-limits»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="287" y="42.0234">ExpenseLimitsPage</text><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="485" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="524" y="25.5352">«/error»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="492" y="42.0234">GenericErrorPage</text><rect fill="#FFFFE0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="629" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="203" x="636" y="25.5352">«expense-limits.controller.js»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="653.5" y="42.0234">ExpenseLimitsController</text><rect fill="#FFFFE0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="258" x="868.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="244" x="875.5" y="25.5352">«expenseRatesAndLimitsDAO.get()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="908" y="42.0234">FetchExpenseLimitsObject</text><rect fill="#FFFFE0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="266" x="1136.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="252" x="1143.5" y="25.5352">«expenseRatesAndLimitsDAO.post()»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163" x="1188" y="42.0234">SetExpenseLimitsObject</text><rect fill="#E6E6FA" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="263" x="1412.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="249" x="1419.5" y="25.5352">«administration/expense-limits.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1463" y="42.0234">ExpenseLimitsTemplate</text><rect fill="#E6E6FA" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="1685.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="146" x="1692.5" y="25.5352">«_errors/generic.njk»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1716" y="42.0234">ErrorTemplate</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174" x="1855.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="1862.5" y="42.0234">ExpenseLimitsValidator</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="2039.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2046.5" y="42.0234">BackendController</text><polygon fill="#181818" points="340.5,80.2871,350.5,84.2871,340.5,88.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="346.5" y1="84.2871" y2="84.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="93" y="79.5449">click expense rates and limits tab</text><polygon fill="#181818" points="725.5,109.5977,735.5,113.5977,725.5,117.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="731.5" y1="113.5977" y2="113.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="453.5" y="108.8555">call expense limits controller</text><polygon fill="#181818" points="985.5,138.9082,995.5,142.9082,985.5,146.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="991.5" y1="142.9082" y2="142.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="804.5" y="138.166">build request object</text><polygon fill="#181818" points="2098,168.2188,2108,172.2188,2098,176.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="997.5" x2="2104" y1="172.2188" y2="172.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1484.75" y="167.4766">send backend request</text><polygon fill="#181818" points="1008.5,197.5293,998.5,201.5293,1008.5,205.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1002.5" x2="2109" y1="201.5293" y2="201.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1515.25" y="196.7871">ok response</text><polygon fill="#181818" points="748.5,226.8398,738.5,230.8398,748.5,234.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="996.5" y1="230.8398" y2="230.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="819.5" y="226.0977">resolve request</text><path d="M10,245.8398 L72,245.8398 L72,253.1504 L62,263.1504 L10,263.1504 L10,245.8398 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="245.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="259.4082">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="228" x="87" y="258.4746">[Failed to fetch expense rates and limits]</text><polygon fill="#181818" points="1008.5,280.4609,998.5,284.4609,1008.5,288.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1002.5" x2="2109" y1="284.4609" y2="284.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1508.25" y="279.7188">error response</text><polygon fill="#181818" points="748.5,309.7715,738.5,313.7715,748.5,317.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742.5" x2="996.5" y1="313.7715" y2="313.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="804" y="309.0293">reject requestObject</text><polygon fill="#181818" points="1753.5,339.082,1763.5,343.082,1753.5,347.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1759.5" y1="343.082" y2="343.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1167" y="338.3398">request and build template</text><polygon fill="#181818" points="748.5,368.3926,738.5,372.3926,748.5,376.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1764.5" y1="372.3926" y2="372.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1212.5" y="367.6504">return HTML</text><polygon fill="#181818" points="563,397.7031,553,401.7031,563,405.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="736.5" y1="401.7031" y2="401.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="605.75" y="396.9609">return HTML</text><polygon fill="#181818" points="56.5,427.0137,46.5,431.0137,56.5,435.0137" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="551" y1="431.0137" y2="431.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="244.75" y="426.2715">render error page</text><polygon fill="#181818" points="1532,463.3242,1542,467.3242,1532,471.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1538" y1="467.3242" y2="467.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1056.25" y="462.582">request and build template</text><polygon fill="#181818" points="748.5,492.6348,738.5,496.6348,748.5,500.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1543" y1="496.6348" y2="496.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1101.75" y="491.8926">return HTML</text><polygon fill="#181818" points="363.5,521.9453,353.5,525.9453,363.5,529.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="736.5" y1="525.9453" y2="525.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="506" y="521.2031">return HTML</text><polygon fill="#181818" points="56.5,551.2559,46.5,555.2559,56.5,559.2559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="351.5" y1="555.2559" y2="555.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="159" y="550.5137">render HTML</text><polygon fill="#181818" points="340.5,580.5664,350.5,584.5664,340.5,588.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="45.5" x2="346.5" y1="584.5664" y2="584.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="57.5" y="579.8242">enter expense rates and limits and click save</text><polygon fill="#181818" points="725.5,609.877,735.5,613.877,725.5,617.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="731.5" y1="613.877" y2="613.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="481" y="609.1348">POST expense limits</text><polygon fill="#181818" points="1930.5,639.1875,1940.5,643.1875,1930.5,647.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1936.5" y1="643.1875" y2="643.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="1267.5" y="638.4453">validate expense limits</text><path d="M10,658.1875 L72,658.1875 L72,665.498 L62,675.498 L10,675.498 L10,658.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="163.8633" style="stroke:#000000;stroke-width:1.5;" width="2029.5" x="10" y="658.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="671.7559">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="87" y="670.8223">[invalid expense limits entered]</text><polygon fill="#181818" points="748.5,692.8086,738.5,696.8086,748.5,700.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1941.5" y1="696.8086" y2="696.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1296" y="692.0664">invalid details</text><polygon fill="#181818" points="1532,722.1191,1542,726.1191,1532,730.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1538" y1="726.1191" y2="726.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1056.25" y="721.377">request and build template</text><polygon fill="#181818" points="748.5,751.4297,738.5,755.4297,748.5,759.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1543" y1="755.4297" y2="755.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1101.75" y="750.6875">return HTML</text><polygon fill="#181818" points="363.5,780.7402,353.5,784.7402,363.5,788.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="736.5" y1="784.7402" y2="784.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="489" y="779.998">return error HTML</text><polygon fill="#181818" points="56.5,810.0508,46.5,814.0508,56.5,818.0508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="351.5" y1="814.0508" y2="814.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="132.5" y="809.3086">render error message</text><polygon fill="#181818" points="748.5,846.3613,738.5,850.3613,748.5,854.3613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1941.5" y1="850.3613" y2="850.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1276.5" y="845.6191">valid details entered</text><polygon fill="#181818" points="985.5,875.6719,995.5,879.6719,985.5,883.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="991.5" y1="879.6719" y2="879.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="804.5" y="874.9297">build request object</text><polygon fill="#181818" points="2098,904.9824,2108,908.9824,2098,912.9824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="997.5" x2="2104" y1="908.9824" y2="908.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1484.75" y="904.2402">send backend request</text><polygon fill="#181818" points="1008.5,934.293,998.5,938.293,1008.5,942.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1002.5" x2="2109" y1="938.293" y2="938.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1515.25" y="933.5508">ok response</text><polygon fill="#181818" points="748.5,963.6035,738.5,967.6035,748.5,971.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="996.5" y1="967.6035" y2="967.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="749.5" y="962.8613">resolve request - no update to values</text><path d="M10,982.6035 L72,982.6035 L72,989.9141 L62,999.9141 L10,999.9141 L10,982.6035 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="982.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="996.1719">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="388" x="87" y="995.2383">[Failed to compare etags for when updating expense limits and rates]</text><polygon fill="#181818" points="1008.5,1017.2246,998.5,1021.2246,1008.5,1025.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1002.5" x2="2109" y1="1021.2246" y2="1021.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1508.25" y="1016.4824">error response</text><polygon fill="#181818" points="748.5,1046.5352,738.5,1050.5352,748.5,1054.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742.5" x2="996.5" y1="1050.5352" y2="1050.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="804" y="1045.793">reject requestObject</text><polygon fill="#181818" points="1753.5,1075.8457,1763.5,1079.8457,1753.5,1083.8457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1759.5" y1="1079.8457" y2="1079.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1167" y="1075.1035">request and build template</text><polygon fill="#181818" points="748.5,1105.1563,738.5,1109.1563,748.5,1113.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1764.5" y1="1109.1563" y2="1109.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1212.5" y="1104.4141">return HTML</text><polygon fill="#181818" points="563,1134.4668,553,1138.4668,563,1142.4668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="736.5" y1="1138.4668" y2="1138.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="605.75" y="1133.7246">return HTML</text><polygon fill="#181818" points="56.5,1163.7773,46.5,1167.7773,56.5,1171.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="551" y1="1167.7773" y2="1167.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="244.75" y="1163.0352">render error page</text><path d="M10,1189.7773 L72,1189.7773 L72,1197.0879 L62,1207.0879 L10,1207.0879 L10,1189.7773 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:1.5;" width="1675.5" x="10" y="1189.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1203.3457">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="278" x="87" y="1202.4121">[Expense rates or limits changed by another user]</text><polygon fill="#181818" points="1532,1224.3984,1542,1228.3984,1532,1232.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1538" y1="1228.3984" y2="1228.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1056.25" y="1223.6563">request and build template</text><polygon fill="#181818" points="748.5,1253.709,738.5,1257.709,748.5,1261.709" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1543" y1="1257.709" y2="1257.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1101.75" y="1252.9668">return HTML</text><polygon fill="#181818" points="363.5,1283.0195,353.5,1287.0195,363.5,1291.0195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="736.5" y1="1287.0195" y2="1287.0195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="489" y="1282.2773">return error HTML</text><polygon fill="#181818" points="56.5,1312.3301,46.5,1316.3301,56.5,1320.3301" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="351.5" y1="1316.3301" y2="1316.3301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="132.5" y="1311.5879">render error message</text><polygon fill="#181818" points="1257.5,1348.6406,1267.5,1352.6406,1257.5,1356.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1263.5" y1="1352.6406" y2="1352.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="940.5" y="1347.8984">build request object</text><polygon fill="#181818" points="2098,1377.9512,2108,1381.9512,2098,1385.9512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1269.5" x2="2104" y1="1381.9512" y2="1381.9512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1620.75" y="1377.209">send backend request</text><polygon fill="#181818" points="1280.5,1407.2617,1270.5,1411.2617,1280.5,1415.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1274.5" x2="2109" y1="1411.2617" y2="1411.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1651.25" y="1406.5195">ok response</text><polygon fill="#181818" points="748.5,1436.5723,738.5,1440.5723,748.5,1444.5723" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1268.5" y1="1440.5723" y2="1440.5723"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="955.5" y="1435.8301">resolve request</text><path d="M10,1455.5723 L72,1455.5723 L72,1462.8828 L62,1472.8828 L10,1472.8828 L10,1455.5723 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="2180.5" x="10" y="1455.5723"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1469.1406">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="237" x="87" y="1468.207">[Failed to update expense rates and limits]</text><polygon fill="#181818" points="1280.5,1490.1934,1270.5,1494.1934,1280.5,1498.1934" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1274.5" x2="2109" y1="1494.1934" y2="1494.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1644.25" y="1489.4512">error response</text><polygon fill="#181818" points="748.5,1519.5039,738.5,1523.5039,748.5,1527.5039" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742.5" x2="1268.5" y1="1523.5039" y2="1523.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="940" y="1518.7617">reject requestObject</text><polygon fill="#181818" points="1753.5,1548.8145,1763.5,1552.8145,1753.5,1556.8145" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1759.5" y1="1552.8145" y2="1552.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1167" y="1548.0723">request and build template</text><polygon fill="#181818" points="748.5,1578.125,738.5,1582.125,748.5,1586.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1764.5" y1="1582.125" y2="1582.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1212.5" y="1577.3828">return HTML</text><polygon fill="#181818" points="563,1607.4355,553,1611.4355,563,1615.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="557" x2="736.5" y1="1611.4355" y2="1611.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="605.75" y="1606.6934">return HTML</text><polygon fill="#181818" points="56.5,1636.7461,46.5,1640.7461,56.5,1644.7461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="551" y1="1640.7461" y2="1640.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="244.75" y="1636.0039">render error page</text><polygon fill="#181818" points="985.5,1673.0566,995.5,1677.0566,985.5,1681.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="991.5" y1="1677.0566" y2="1677.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="804.5" y="1672.3145">build request object</text><polygon fill="#181818" points="2098,1702.3672,2108,1706.3672,2098,1710.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="997.5" x2="2104" y1="1706.3672" y2="1706.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1484.75" y="1701.625">send backend request</text><polygon fill="#181818" points="1008.5,1731.6777,998.5,1735.6777,1008.5,1739.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1002.5" x2="2109" y1="1735.6777" y2="1735.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1515.25" y="1730.9355">ok response</text><polygon fill="#181818" points="748.5,1760.9883,738.5,1764.9883,748.5,1768.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="996.5" y1="1764.9883" y2="1764.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="819.5" y="1760.2461">resolve request</text><polygon fill="#181818" points="1532,1790.2988,1542,1794.2988,1532,1798.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="737.5" x2="1538" y1="1794.2988" y2="1794.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1056.25" y="1789.5566">request and build template</text><polygon fill="#181818" points="748.5,1819.6094,738.5,1823.6094,748.5,1827.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="1543" y1="1823.6094" y2="1823.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1101.75" y="1818.8672">return HTML</text><polygon fill="#181818" points="363.5,1848.9199,353.5,1852.9199,363.5,1856.9199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="736.5" y1="1852.9199" y2="1852.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="506" y="1848.1777">return HTML</text><polygon fill="#181818" points="56.5,1878.2305,46.5,1882.2305,56.5,1886.2305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="50.5" x2="351.5" y1="1882.2305" y2="1882.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="159" y="1877.4883">render HTML</text><!--MD5=[b2f6114cb24608811f9842441e1f61b9]
@startuml update-expense-rates-and-limits

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

''' LOCAL ROUTING
participant ExpenseLimitsPage <</administration/expense-limits>>
participant GenericErrorPage <</error>>

''' CONTROLLER AND REQUEST OBJECTS
participant ExpenseLimitsController <<expense-limits.controller.js>> #lightyellow
participant FetchExpenseLimitsObject <<expenseRatesAndLimitsDAO.get()>> #lightyellow
participant SetExpenseLimitsObject <<expenseRatesAndLimitsDAO.post()>> #lightyellow

''' TEMPLATES
participant ExpenseLimitsTemplate <<administration/expense-limits.njk>> #lavender
participant ErrorTemplate <<_errors/generic.njk>> #lavender

''' FILTERS AND VALIDATORS
participant ExpenseLimitsValidator

''' BACKEND CONTROLLER
participant BackendController

Actor -> ExpenseLimitsPage : click expense rates and limits tab
ExpenseLimitsPage -> ExpenseLimitsController : call expense limits controller
 
ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request

alt Failed to fetch expense rates and limits
    FetchExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - FetchExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
ExpenseLimitsPage <- ExpenseLimitsController : return HTML
Actor <- ExpenseLimitsPage : render HTML

Actor -> ExpenseLimitsPage : enter expense rates and limits and click save

ExpenseLimitsPage -> ExpenseLimitsController : POST expense limits
ExpenseLimitsController -> ExpenseLimitsValidator : validate expense limits

alt invalid expense limits entered
  ExpenseLimitsController <- ExpenseLimitsValidator : invalid details
  ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
  ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
  ExpenseLimitsPage <- ExpenseLimitsController : return error HTML
  Actor <- ExpenseLimitsPage : render error message
end

ExpenseLimitsController <- ExpenseLimitsValidator : valid details entered

ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request - no update to values

alt Failed to compare etags for when updating expense limits and rates
    FetchExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - FetchExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

alt Expense rates or limits changed by another user 
  ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
  ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
  ExpenseLimitsPage <- ExpenseLimitsController : return error HTML
  Actor <- ExpenseLimitsPage : render error message
end

ExpenseLimitsController -> SetExpenseLimitsObject : build request object
SetExpenseLimitsObject -> BackendController : send backend request
SetExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- SetExpenseLimitsObject : resolve request

alt Failed to update expense rates and limits
    SetExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - SetExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request
ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
ExpenseLimitsPage <- ExpenseLimitsController : return HTML
Actor <- ExpenseLimitsPage : render HTML
@end

@startuml update-expense-rates-and-limits

skinparam Style strictuml 
skinparam SequenceMessageAlignment center

participant Actor

participant ExpenseLimitsPage <</administration/expense-limits>>
participant GenericErrorPage <</error>>

participant ExpenseLimitsController <<expense-limits.controller.js>> #lightyellow
participant FetchExpenseLimitsObject <<expenseRatesAndLimitsDAO.get()>> #lightyellow
participant SetExpenseLimitsObject <<expenseRatesAndLimitsDAO.post()>> #lightyellow

participant ExpenseLimitsTemplate <<administration/expense-limits.njk>> #lavender
participant ErrorTemplate <<_errors/generic.njk>> #lavender

participant ExpenseLimitsValidator

participant BackendController

Actor -> ExpenseLimitsPage : click expense rates and limits tab
ExpenseLimitsPage -> ExpenseLimitsController : call expense limits controller
 
ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request

alt Failed to fetch expense rates and limits
    FetchExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - FetchExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
ExpenseLimitsPage <- ExpenseLimitsController : return HTML
Actor <- ExpenseLimitsPage : render HTML

Actor -> ExpenseLimitsPage : enter expense rates and limits and click save

ExpenseLimitsPage -> ExpenseLimitsController : POST expense limits
ExpenseLimitsController -> ExpenseLimitsValidator : validate expense limits

alt invalid expense limits entered
  ExpenseLimitsController <- ExpenseLimitsValidator : invalid details
  ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
  ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
  ExpenseLimitsPage <- ExpenseLimitsController : return error HTML
  Actor <- ExpenseLimitsPage : render error message
end

ExpenseLimitsController <- ExpenseLimitsValidator : valid details entered

ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request - no update to values

alt Failed to compare etags for when updating expense limits and rates
    FetchExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - FetchExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

alt Expense rates or limits changed by another user 
  ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
  ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
  ExpenseLimitsPage <- ExpenseLimitsController : return error HTML
  Actor <- ExpenseLimitsPage : render error message
end

ExpenseLimitsController -> SetExpenseLimitsObject : build request object
SetExpenseLimitsObject -> BackendController : send backend request
SetExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- SetExpenseLimitsObject : resolve request

alt Failed to update expense rates and limits
    SetExpenseLimitsObject <- - BackendController : error response
    ExpenseLimitsController <- - SetExpenseLimitsObject : reject requestObject
    ExpenseLimitsController -> ErrorTemplate : request and build template
    ExpenseLimitsController <- ErrorTemplate : return HTML
    GenericErrorPage <- ExpenseLimitsController : return HTML
    Actor <- GenericErrorPage : render error page
end

ExpenseLimitsController -> FetchExpenseLimitsObject : build request object
FetchExpenseLimitsObject -> BackendController : send backend request
FetchExpenseLimitsObject <- BackendController : ok response
ExpenseLimitsController <- FetchExpenseLimitsObject : resolve request
ExpenseLimitsController -> ExpenseLimitsTemplate : request and build template
ExpenseLimitsController <- ExpenseLimitsTemplate : return HTML
ExpenseLimitsPage <- ExpenseLimitsController : return HTML
Actor <- ExpenseLimitsPage : render HTML
@end

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>